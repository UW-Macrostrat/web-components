# hyperstyle-loader

This loader for `webpack` (Version 5) adds a convenient way to work
with Hyperscript and styles. It is designed to sit after `style-loader`,
which exposes CSS class names as a Javascript object, and apply those
styles dynamically to a hyperscript instance (from `@macrostrat/hyper`).

This allows CSSs classes to be transparently used in Javascript and
Typescript files, with a minimum of boilerplate code.

## Usage

Set up the `@macrostrat/hyperstyle-loader` in your Webpack `rules` section:

```javascript
{
  test: /\.(sass|scss)$/,
  use: [
    "@macrostrat/hyperstyle-loader",
    "style-loader",
    {
      loader: "css-loader",
      options: {
        modules: {
          mode: "local",
          localIdentName: "[local]-[hash:base64:6]",
        },
      },
    },
    "sass-loader"
    ],
}, ...
```

- `@macrostrat/hyper` must be present in your dependencies
- Currently, this must be paired with `style-loader` (other configurations have
  not been tested).

Then you can simply access your styles by writing hyperscript:

```javascript
import h from "./style.scss";
import render from "react-dom";

render(h("div.styled-div", "Hello"), document.body);
```

## How it works

The module replaces the default export of CSS module with an instrumented
hyperscript function, but keeps backwards compatibility with the existing
default export:

```javascript
import hyper from "@macrostrat/hyper";
// content.locals contains the style mapping generated by css-loader
const styles = content && content.locals ? content.locals : {};
let h = hyper.styled(styles);
// Keep backwards compatibility with the existing default style object.
Object.assign(h, styles);
export default h;
```
