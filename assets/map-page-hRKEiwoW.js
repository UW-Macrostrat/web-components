import{m as x,p as it}from"./index.modern-CqpcyjV2.js";import{u as st,E as lt,T as ct,a as ut,J as dt,b as pt,d as ft,e as mt}from"./index-BQakYib5.js";import{u as Y,d as Me}from"./toaster-CUxSLCcg.js";import{r as s}from"./index-BBkUAzwr.js";import{c as C}from"./index-DtBkkNk_.js";import{a as U,m as re}from"./mapbox-gl-MdAd9xHE.js";import{a as ht}from"./index-DwtI8WR9.js";import{c as de}from"./chroma-Bi8DEGLa.js";import"./jsx-runtime-DRTy3Uxn.js";import"./axios-Bqepj0vs.js";import{d as _t,b as gt,I as J}from"./buttons-CKwIiXPX.js";import{_ as I,a as $,b as z}from"./tslib.es6-ChmHIYM0.js";import{D,A,r as pe,s as fe,S as Oe,B as oe,I as Te}from"./buttons-ClSVyNZf.js";import{C as vt,a as bt,e as xt,b as yt,c as Ct,d as me,S as he,f as Nt,R as St,g as wt,h as Rt,D as Et,i as kt,L as Pt,j as Le,k as Mt,N as Ot,l as Tt,A as Lt,m as It,n as zt,F as Dt}from"./classes-BP-FkMqc.js";import{L as At,E as Bt}from"./index-BYFCOTjP.js";/* empty css                  */import{g as Gt}from"./group-Bf4Jec6Z.js";var Ft={ZERO:0,ONE:1,TWO:2,THREE:3,FOUR:4},ie=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n,a=this.props,r=a.className,o=a.elevation,i=a.interactive,l=$(a,["className","elevation","interactive"]),c=C(vt,(n={},n[bt]=i,n),xt(o),r);return s.createElement("div",z({className:c},l))},t.displayName="".concat(D,".Card"),t.defaultProps={elevation:Ft.ZERO,interactive:!1},t}(A),g;(function(e){e[e.OPEN_START=0]="OPEN_START",e[e.OPENING=1]="OPENING",e[e.OPEN=2]="OPEN",e[e.CLOSING_START=3]="CLOSING_START",e[e.CLOSING=4]="CLOSING",e[e.CLOSED=5]="CLOSED"})(g||(g={}));var $t=function(e){I(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={animationState:n.props.isOpen?g.OPEN:g.CLOSED,height:void 0,heightWhenOpen:void 0},n.contents=null,n.contentsRefHandler=function(a){if(n.contents=a,n.contents!=null){var r=n.contents.clientHeight;n.setState({animationState:n.props.isOpen?g.OPEN:g.CLOSED,height:r===0?void 0:"".concat(r,"px"),heightWhenOpen:r===0?void 0:r})}},n}return t.getDerivedStateFromProps=function(n,a){var r=n.isOpen,o=a.animationState;if(r)switch(o){case g.OPEN:break;case g.OPENING:break;default:return{animationState:g.OPEN_START}}else switch(o){case g.CLOSED:break;case g.CLOSING:break;default:return{animationState:g.CLOSING_START,height:"".concat(a.heightWhenOpen,"px")}}return null},t.prototype.render=function(){var n=this.state.animationState!==g.CLOSED,a=n||this.props.keepChildrenMounted,r=n&&this.state.animationState!==g.CLOSING,o=this.state.height==="auto",i={height:n?this.state.height:void 0,overflowY:o?"visible":void 0,transition:o?"none":void 0},l={transform:r?"translateY(0)":"translateY(-".concat(this.state.heightWhenOpen,"px)"),transition:o?"none":void 0};return s.createElement(this.props.component,{className:C(yt,this.props.className),style:i},s.createElement("div",{className:Ct,ref:this.contentsRefHandler,style:l,"aria-hidden":!n},a?this.props.children:null))},t.prototype.componentDidMount=function(){this.forceUpdate(),this.props.isOpen?this.setState({animationState:g.OPEN,height:"auto"}):this.setState({animationState:g.CLOSED,height:"0px"})},t.prototype.componentDidUpdate=function(){var n=this;if(this.contents!=null){var a=this.props.transitionDuration,r=this.state.animationState;if(r===g.OPEN_START){var o=this.contents.clientHeight;this.setState({animationState:g.OPENING,height:"".concat(o,"px"),heightWhenOpen:o}),this.setTimeout(function(){return n.onDelayedStateChange()},a)}else if(r===g.CLOSING_START){var i=this.contents.clientHeight;this.setTimeout(function(){return n.setState({animationState:g.CLOSING,height:"0px",heightWhenOpen:i})}),this.setTimeout(function(){return n.onDelayedStateChange()},a)}}},t.prototype.onDelayedStateChange=function(){switch(this.state.animationState){case g.OPENING:this.setState({animationState:g.OPEN,height:"auto"});break;case g.CLOSING:this.setState({animationState:g.CLOSED});break}},t.displayName="".concat(D,".Collapse"),t.defaultProps={component:"div",isOpen:!1,keepChildrenMounted:!1,transitionDuration:200},t}(A),se=function(e){var t,n=e.alignIndicator,a=e.children,r=e.className,o=e.indicatorChildren,i=e.inline,l=e.inputRef,c=e.label,u=e.labelElement,p=e.large,f=e.style,m=e.type,y=e.typeClassName,E=e.tagName,P=E===void 0?"label":E,S=$(e,["alignIndicator","children","className","indicatorChildren","inline","inputRef","label","labelElement","large","style","type","typeClassName","tagName"]),v=C(Rt,y,(t={},t[Et]=S.disabled,t[kt]=i,t[Pt]=p,t),Le(n),r);return s.createElement(P,{className:v,style:f},s.createElement("input",z({},S,{ref:l,type:m})),s.createElement("span",{className:Mt},o),c,u,a)},Ie=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props,a=n.innerLabelChecked,r=n.innerLabel,o=$(n,["innerLabelChecked","innerLabel"]),i=r||a?[s.createElement("div",{key:"checked",className:me},s.createElement("div",{className:he},a||r)),s.createElement("div",{key:"unchecked",className:me},s.createElement("div",{className:he},r))]:null;return s.createElement(se,z({},o,{type:"checkbox",typeClassName:Nt,indicatorChildren:i}))},t.displayName="".concat(D,".Switch"),t}(A);(function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){return s.createElement(se,z({},this.props,{type:"radio",typeClassName:St}))},t.displayName="".concat(D,".Radio"),t})(A);(function(e){I(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={indeterminate:n.props.indeterminate||n.props.defaultIndeterminate||!1},n.input=null,n.handleInputRef=pe(n,"input",n.props.inputRef),n.handleChange=function(a){var r,o,i=a.target.indeterminate;n.props.indeterminate==null&&n.setState({indeterminate:i}),(o=(r=n.props).onChange)===null||o===void 0||o.call(r,a)},n}return t.getDerivedStateFromProps=function(n){var a=n.indeterminate;return a!=null?{indeterminate:a}:null},t.prototype.render=function(){var n=this.props;n.defaultIndeterminate,n.indeterminate;var a=$(n,["defaultIndeterminate","indeterminate"]);return s.createElement(se,z({},a,{inputRef:this.handleInputRef,onChange:this.handleChange,type:"checkbox",typeClassName:wt}))},t.prototype.componentDidMount=function(){this.updateIndeterminate()},t.prototype.componentDidUpdate=function(n){this.updateIndeterminate(),n.inputRef!==this.props.inputRef&&(fe(n.inputRef,null),this.handleInputRef=pe(this,"input",this.props.inputRef),fe(this.props.inputRef,this.input))},t.prototype.updateIndeterminate=function(){this.input!=null&&(this.input.indeterminate=this.state.indeterminate)},t.displayName="".concat(D,".Checkbox"),t})(A);var Ht=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props,a=n.className,r=$(n,["className"]);return s.createElement("div",z({className:C(Ot,a)},r))},t.displayName="".concat(D,".NavbarDivider"),t}(A),Wt=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props,a=n.align,r=n.children,o=n.className,i=$(n,["align","children","className"]),l=C(Tt,Le(a),o);return s.createElement("div",z({className:l},i),r)},t.displayName="".concat(D,".NavbarGroup"),t.defaultProps={align:Lt.LEFT},t}(A),jt=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props,a=n.children,r=n.className,o=$(n,["children","className"]);return s.createElement("div",z({className:C(It,r)},o),a)},t.displayName="".concat(D,".NavbarHeading"),t}(A),Ut=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n,a=this.props,r=a.children,o=a.className,i=a.fixedToTop,l=$(a,["children","className","fixedToTop"]),c=C(zt,(n={},n[Dt]=i,n),o);return s.createElement("div",z({className:c},l),r)},t.displayName="".concat(D,".Navbar"),t.Divider=Ht,t.Group=Wt,t.Heading=jt,t}(A);function Vt(e){const t=e.getFreeCameraOptions(),n=t.position.toLngLat();let a=e.getCenter();return{camera:{...n,altitude:t.position.toAltitude(),bearing:e.getBearing(),pitch:e.getPitch()},target:{...a,zoom:e.getZoom()}}}function Zt(e,t){var i;const{pitch:n=0,bearing:a=0,altitude:r}=t.camera,o=(i=t.target)==null?void 0:i.zoom;if(o!=null&&r==null&&n==0&&a==0){const{lng:l,lat:c}=t.target;e.setZoom(o),e.setCenter([l,c])}else{const{altitude:l,lng:c,lat:u}=t.camera,p=new U.FreeCameraOptions(U.MercatorCoordinate.fromLngLat({lng:c,lat:u},l),[0,0,0,1]);p.setPitchBearing(n,a),e.setFreeCameraOptions(p)}}function Xt(e){return e.replace("mapbox://styles/","https://api.mapbox.com/styles/v1/")}async function ee(e,t){if(typeof e!="string")return e;let{data:n,status:a,statusText:r}=await ht.get(Xt(e),{params:t});if(a!==200)throw new Error(`Returned ${a}: ${r}`);return n}function Yt(...e){let t={...e[0]};t.sources={},t.layers=[];for(let n of e)t.sources={...t.sources,...n.sources??{}},t.layers=t.layers.concat(n.layers),t.sprite=n.sprite??t.sprite,t.glyphs=n.glyphs??t.glyphs;return t}function ze(e){if(e==null)return{mapIsRotated:!1,mapUse3D:!1,mapIsGlobal:!1,mapIsLoaded:!1};const t=e.camera.pitch??0,n=e.camera.bearing??0,a=e.camera.altitude??1e7,r=t!=0||n!=0,o=a>16e5;let i=!1;return a!=null&&(i=t>0&&a<2e5||a<8e4),{mapIsRotated:r,mapUse3D:i,mapIsGlobal:o,mapIsLoaded:!0}}const Jt="_searchbar_90m8v_1",qt={"searchbar-holder":"_searchbar-holder_90m8v_1","navbar-holder":"_navbar-holder_90m8v_7",searchbar:Jt,"loading-button":"_loading-button_90m8v_26","status-tongue":"_status-tongue_90m8v_31"},De={isLoading:!1,isInitialized:!1,isStyleLoaded:!1},Ae=s.createContext(null),Be=s.createContext(null),Ge=s.createContext(De),Fe=s.createContext(null);function R(){return s.useContext(Be)}function le(){return s.useContext(Ge)}function $e(){return s.useContext(Fe)}function Kt(){return R().current}function ce(){return s.useContext(Ae)}function Qt(e,t){switch(t.type){case"set-map":return Y(e,{status:{isInitialized:{$set:!0}}});case"set-loading":return Y(e,{status:{isLoading:{$set:t.payload}}});case"set-initialized":return Y(e,{status:{isInitialized:{$set:t.payload}}});case"set-style-loaded":return Y(e,{status:{isStyleLoaded:{$set:t.payload}}});case"map-moved":return{...e,position:t.payload}}}function en({children:e}){const t=s.useRef(),[n,a]=s.useReducer(Qt,{status:De,position:null}),r=s.useCallback(o=>{o.type==="set-map"&&(t.current=o.payload),a(o)},[]);return x(Ae.Provider,{value:r},x(Be.Provider,{value:t},x(Ge.Provider,{value:n.status},x(Fe.Provider,{value:n.position},e))))}function tn(e,t,n){s.useEffect(()=>{const a=e.current;if(a==null)return;a.isStyleLoaded()&&n(a,t);const r=()=>n(a,t);return a.on("style.load",r),()=>{a.off("style.load",r)}},[e.current,t])}class He{constructor(){this.node=document.createElement("div"),this.node.classList.add("mapboxgl-ctrl"),this.node.classList.add("mapboxgl-ctrl-group"),this.node.classList.add("mapbox-control")}addButton(t){this.node.appendChild(t.node)}addClassName(t){this.node.classList.add(t)}removeClassName(t){this.node.classList.remove(t)}onAddControl(){}onRemoveControl(){}onAdd(t){return this.map=t,this.onAddControl(),this.node}onRemove(){this.onRemoveControl(),this.node.parentNode.removeChild(this.node),this.map=void 0}}class te{constructor(){this.node=document.createElement("button"),this.node.type="button",this.icon=null}setIcon(t){this.icon=t,this.node.appendChild(t)}setText(t){this.node.textContent=t}onClick(t){this.node.addEventListener("click",t)}addClassName(t){this.node.classList.add(t)}removeClassName(t){this.node.classList.remove(t)}}var _e;(function(e){e.Default="",e.Move="move",e.Grabbing="grabbing",e.NESWResize="nesw-resize",e.NWSEResize="nwse-resize"})(_e||(_e={}));var ge;(function(e){e.Move="move",e.Transform="transform"})(ge||(ge={}));var ve;(function(e){e.Visible="visible",e.None="none"})(ve||(ve={}));var be;(function(e){e.Next="next",e.Prev="prev"})(be||(be={}));const nn=`
<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" viewBox="0 0 24 24" fill="#505050" width="20" height="20">
    <rect fill="none" height="24" width="24"/>
    <path d="M18,13h-5v5c0,0.55-0.45,1-1,1l0,0c-0.55,0-1-0.45-1-1v-5H6c-0.55,0-1-0.45-1-1l0,0c0-0.55,0.45-1,1-1h5V6 c0-0.55,0.45-1,1-1l0,0c0.55,0,1,0.45,1,1v5h5c0.55,0,1,0.45,1,1l0,0C19,12.55,18.55,13,18,13z"/>
</svg>
`;function an(){return new DOMParser().parseFromString(nn,"image/svg+xml").firstChild}const rn=`
<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" viewBox="0 0 24 24" fill="#505050" width="20" height="20">
    <rect fill="none" height="24" width="24"/>
    <path d="M18,13H6c-0.55,0-1-0.45-1-1l0,0c0-0.55,0.45-1,1-1h12c0.55,0,1,0.45,1,1l0,0C19,12.55,18.55,13,18,13z"/>
</svg>
`;function on(){return new DOMParser().parseFromString(rn,"image/svg+xml").firstChild}let sn=class extends He{constructor(){super(),this.zoomIn=new te,this.zoomOut=new te}insert(){this.addClassName("mapbox-zoom"),this.zoomIn.setIcon(an()),this.zoomIn.onClick(()=>this.map.zoomIn()),this.zoomOut.setIcon(on()),this.zoomOut.onClick(()=>this.map.zoomOut()),this.addButton(this.zoomIn),this.addButton(this.zoomOut)}onAddControl(){this.insert()}};function X({className:e,control:t,options:n={}}){const a=R(),r=s.useRef(),o=s.useRef();return s.useEffect(()=>{if(a.current==null)return;const i=new t(n);o.current=i;const l=i.onAdd(a.current);return r.current.appendChild(l),()=>{var c;(c=o.current)==null||c.onRemove()}},[a.current,r.current,t,n]),x("div.map-control-wrapper",{className:e,ref:r})}function ln({className:e}){const t=Kt(),[n,a]=s.useState(!1);s.useEffect(()=>{let i=t==null?void 0:t.getProjection().name;a(i=="globe")},[t]);const r=n?"mercator":"globe";return x("div.map-control.globe-control.mapboxgl-ctrl-group.mapboxgl-ctrl.mapbox-control",{className:e},[x("button.globe-control-button",{onClick(){t!=null&&(t.setProjection(r),a(r=="globe"))}},x(_t,{icon:n?"map":"globe"}))])}class cn extends He{constructor(){super(),this.button=new te}insert(){this.addClassName("mapbox-3d"),this.button.setText("3D"),this.button.onClick(()=>{this.map.easeTo({pitch:60,duration:1e3})}),this.addButton(this.button)}onAddControl(){this.insert()}}function un({className:e=null}){const t=s.useRef({showCompass:!0,showZoom:!1,visualizePitch:!0});return x(X,{className:C("compass-control",e),control:U.NavigationControl,options:t.current})}const dn=({className:e=null,options:t=null})=>x(X,{className:C("zoom-control",e),control:sn,options:t}),pn=({className:e=null,options:t=null})=>x(X,{className:C("map-3d-control",e),control:cn,options:t});function We(e,t,n){if(e!==null)for(var a,r,o,i,l,c,u,p=0,f=0,m,y=e.type,E=y==="FeatureCollection",P=y==="Feature",S=E?e.features.length:1,v=0;v<S;v++){u=E?e.features[v].geometry:P?e.geometry:e,m=u?u.type==="GeometryCollection":!1,l=m?u.geometries.length:1;for(var b=0;b<l;b++){var _=0,w=0;if(i=m?u.geometries[b]:u,i!==null){c=i.coordinates;var N=i.type;switch(p=n&&(N==="Polygon"||N==="MultiPolygon")?1:0,N){case null:break;case"Point":if(t(c,f,v,_,w)===!1)return!1;f++,_++;break;case"LineString":case"MultiPoint":for(a=0;a<c.length;a++){if(t(c[a],f,v,_,w)===!1)return!1;f++,N==="MultiPoint"&&_++}N==="LineString"&&_++;break;case"Polygon":case"MultiLineString":for(a=0;a<c.length;a++){for(r=0;r<c[a].length-p;r++){if(t(c[a][r],f,v,_,w)===!1)return!1;f++}N==="MultiLineString"&&_++,N==="Polygon"&&w++}N==="Polygon"&&_++;break;case"MultiPolygon":for(a=0;a<c.length;a++){for(w=0,r=0;r<c[a].length;r++){for(o=0;o<c[a][r].length-p;o++){if(t(c[a][r][o],f,v,_,w)===!1)return!1;f++}w++}_++}break;case"GeometryCollection":for(a=0;a<i.geometries.length;a++)if(We(i.geometries[a],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function q(e){var t=[1/0,1/0,-1/0,-1/0];return We(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}q.default=q;const fn={"recenter-button":"_recenter-button_1c5n2_1","off-center":"_off-center_1c5n2_6","recenter-label":"_recenter-label_1c5n2_6","out-of-padding":"_out-of-padding_1c5n2_10"},xe=x.styled(fn);function mn(e){switch(e){case 0:return"centered";case 1:return"near-center";case 2:return"off-center";case 3:return"out-of-padding";case 4:return"out-of-view"}}function hn(e){switch(e){case 0:case 1:return J.NONE;case 2:return J.PRIMARY;case 3:return J.SUCCESS;case 4:return J.WARNING}}function _n(e,t){const n=R(),a=s.useRef(null),r=s.useRef(null);s.useEffect(()=>{const o=n.current;if(o==null)return;let i=null;e!=a.current&&(i??(i={}),i.center=e),t!=r.current&&(i??(i={}),i.padding=t),i!=null&&(r.current==null?i.duration=0:i.duration=800,o.flyTo(i),o.once("moveend",()=>{a.current=e,r.current=t}))},[e,t])}function je(e,t){const n=(t[0]-e[0])*Math.PI/180,a=e[1]*Math.PI/180,r=t[1]*Math.PI/180;return Math.acos(Math.sin(a)*Math.sin(r)+Math.cos(a)*Math.cos(r)*Math.cos(n))}function gn(e,t){if(t==null)return null;const n=e.getCenter();if(t.hasOwnProperty("lng")&&t.hasOwnProperty("lat")&&(t=[t.lng,t.lat]),!(t instanceof Array)){const f=q(t);t=[(f[0]+f[2])/2,(f[1]+f[3])/2]}const a=je(t,n);if(a>Math.PI/4)return 2;if(a>Math.PI/2)return 4;const r=e.project(t),o=e.project(n),i=Math.abs(r.x-o.x),l=Math.abs(r.y-o.y),c=e.getPadding();let{width:u,height:p}=e.getCanvas();return u/=2,p/=2,i<10&&l<10?0:i<150&&l<150?1:r.x>c.left&&r.x<u-c.right&&r.y>c.top&&r.y<p-c.bottom?2:r.x>0&&r.x<u&&r.y>0&&r.y<p?3:4}function Ue(e){const t=R(),[n,a]=s.useState(null);return s.useEffect(()=>{var o;if(t.current==null||e==null)return;const r=()=>{a(gn(t.current,e))};return(o=t.current)==null||o.on("move",r),r(),()=>{var i;(i=t.current)==null||i.off("move",r)}},[t.current,e]),n}function Ve(e){return e==0||e==1}function vn(e){let t,n=null,a=null;if(e instanceof Array&&(e.length===2?point=e:e.length===4&&(t=e)),e.hasOwnProperty("lat")&&e.hasOwnProperty("lng")&&(n=[e.lng,e.lat]),e.hasOwnProperty("type")&&(e.type==="Point"?n=e.coordinates:t=q(e)),t!=null){n=[(t[0]+t[2])/2,(t[1]+t[3])/2];const r=je(n,[t[0],t[1]]);a=Math.log2(Math.PI*2/r)-1}return{center:n,zoom:a}}function bn({location:e,className:t,easeDuration:n=800,focusState:a=null,...r}){const o=R(),i=Ue(e);a??(a=i);const l=Ve(a);return xe(gt,{minimal:!0,icon:"map-marker",onClick(){var c,u;if(a==0)(c=o.current)==null||c.resetNorth();else{let p={duration:n};const{center:f,zoom:m}=vn(e);if(f==null)return;p={...p,center:f},m!=null&&(p={...p,zoom:m}),(u=o.current)==null||u.flyTo(p)}},className:C("recenter-button",t,mn(a)),intent:hn(a),...r},[l?null:xe("span.recenter-label","Recenter")])}const W=x.styled(qt),xn=W(Oe,{size:16});function yn({isLoading:e=!1,onClick:t,active:n=!1,icon:a="menu"}){return W(oe,{className:"loading-button",icon:e?xn:a,large:!1,minimal:!0,onClick:t,active:n&&!e})}function Cn(e){const{isLoading:t}=le(),n=s.useMemo(()=>t,[t]);return W(yn,{...e,isLoading:n})}function Nn({className:e,children:t,statusElement:n=null}){return W("div.searchbar-holder",{className:e},[W("div.navbar-holder",[W(Ut,{className:"searchbar panel"},t)]),W.if(n!=null)(ie,{className:"status-tongue"},n)])}const Sn="_spacer_3kgxu_16",wn="_infodrawer_3kgxu_26",Rn="_loading_3kgxu_46",Ze={"copy-link-button":"_copy-link-button_3kgxu_1","location-panel-header":"_location-panel-header_3kgxu_8",spacer:Sn,"left-icon":"_left-icon_3kgxu_19","position-controls":"_position-controls_3kgxu_22","infodrawer-header-item":"_infodrawer-header-item_3kgxu_26",infodrawer:wn,loading:Rn,"infodrawer-body":"_infodrawer-body_3kgxu_46","infodrawer-contents":"_infodrawer-contents_3kgxu_51"},O=x.styled(Ze);function En({position:e,showCopyLink:t=!1}){const n=Ue(e),a=Ve(n)&&t;return O("div.position-controls",[O(bn,{location:e,focusState:n},[]),O.if(a)(kn,{itemName:"position"})])}function kn({itemName:e,children:t,onClick:n,...a}){const r=st();let o="Copied link";return e!=null&&(o+=` to ${e}`),o+="!",O(oe,{className:"copy-link-button",rightIcon:O(Te,{icon:"link",size:12}),minimal:!0,small:!0,onClick(){navigator.clipboard.writeText(window.location.href).then(()=>{r==null||r.show({message:o,intent:"success",icon:"clipboard",timeout:1e3}),n==null||n()},()=>{r==null||r.show({message:"Failed to copy link",intent:"danger",icon:"error",timeout:1e3})})},...a},t??"Copy link")}function Pn(e){const{onClose:t,position:n,zoom:a=7,elevation:r,showCopyPositionButton:o}=e;return O("header.location-panel-header",[O(En,{position:n,showCopyLink:o}),O("div.spacer"),O(At,{position:n,zoom:a,className:"infodrawer-header-item"}),O.if(r!=null)(Bt,{elevation:r,className:"infodrawer-header-item"}),O(oe,{minimal:!0,icon:"cross",onClick:t})])}const G=x.styled(Ze);function Mn(e){const t=C("infodrawer",e.className);return G(ie,{...e,className:t})}function On(e){const{className:t,headerElement:n=null,title:a,onClose:r,children:o,...i}=e,l=n??G(Pn,{onClose:r,...i},[a==null?null:G("h3",[a])]);return G(Mn,{className:t},[l,G("div.infodrawer-body",G("div.infodrawer-contents",G(lt,null,o)))])}function Tn(e){const{children:t,className:n,loading:a=!1,...r}=e,o=C("location-panel",n,{loading:a});return G(On,{className:o,...r},t)}async function Ln(e,t=null){const{inDarkMode:n=!1,color:a="rgb(74, 242, 161)",mapboxToken:r,xRaySources:o}=t,i=await ee(e,{access_token:r}),l=o??Object.keys(i.sources);let c=[];for(let u of i.layers){if(!l.includes(u.source)){c.push(u);continue}let p=In(u,a,n);p!=null&&c.push(p)}return{...i,layers:c}}function In(e,t,n){const a=de(t),r=(i=1,l=0)=>n?a.alpha(i).darken(l).css():de(t).darken(2-l).alpha(i).css();if(e.type=="background")return null;let o={...e};return e.type=="fill"?o.paint={"fill-color":r(.1),"fill-outline-color":r(.5)}:e.type=="line"?o.paint={"line-color":r(.5,0),"line-width":1.5}:e.type=="symbol"?o.paint={"text-color":r(1,-.5),"text-halo-color":"#000"}:e.type=="circle"&&(o.paint={"circle-color":r(.5,0),"circle-stroke-color":r(.5,1),"circle-radius":2}),o}async function zn(e,t=null,n={}){const{mapboxToken:a,xRay:r=!1,xRaySources:o,...i}=n;let l=o,c=await ee(e,{access_token:a});if(t!=null){const u=await ee(t,{access_token:a});c=Yt(c,u),l??(l=Object.keys(u.sources))}return r&&(l??(l=Object.keys(c.sources)),c=await Ln(c,{...i,mapboxToken:a,xRaySources:l})),c}const Dn="_searchbar_1x3ca_119",An="_spacer_1x3ca_141",Bn="_buttons_1x3ca_160",Gn="_minimal_1x3ca_177",ue={"map-container":"_map-container_1x3ca_1","show-panel-outlines":"_show-panel-outlines_1x3ca_9","map-view-container":"_map-view-container_1x3ca_9","fit-viewport":"_fit-viewport_1x3ca_12","compass-control":"_compass-control_1x3ca_18","map-is-rotated":"_map-is-rotated_1x3ca_21","map-3d-control":"_map-3d-control_1x3ca_24","map-3d-available":"_map-3d-available_1x3ca_27","globe-control":"_globe-control_1x3ca_33","map-is-global":"_map-is-global_1x3ca_39","detail-panel-open":"_detail-panel-open_1x3ca_42","zoom-control":"_zoom-control_1x3ca_42","detail-panel-fixed":"_detail-panel-fixed_1x3ca_46","detail-panel-holder":"_detail-panel-holder_1x3ca_46","map-control-stack":"_map-control-stack_1x3ca_59","main-row":"_main-row_1x3ca_67","map-ui":"_map-ui_1x3ca_76","mapbox-map":"_mapbox-map_1x3ca_92","panel-card":"_panel-card_1x3ca_103","context-stack":"_context-stack_1x3ca_116",searchbar:Dn,"detail-stack":"_detail-stack_1x3ca_124","panel-container":"_panel-container_1x3ca_129","panel-title":"_panel-title_1x3ca_137",spacer:An,"searchbar-holder":"_searchbar-holder_1x3ca_152","right-panel":"_right-panel_1x3ca_156",buttons:Bn,"tab-button":"_tab-button_1x3ca_167","menu-card":"_menu-card_1x3ca_177","narrow-card":"_narrow-card_1x3ca_177","panel-header":"_panel-header_1x3ca_177",minimal:Gn,"context-panel-leave":"_context-panel-leave_1x3ca_182","narrow-enter":"_narrow-enter_1x3ca_187","menu-group":"_menu-group_1x3ca_204","menu-content":"_menu-content_1x3ca_214","bp4-button-group":"_bp4-button-group_1x3ca_219","detail-panel-container":"_detail-panel-container_1x3ca_284","map-right-controls":"_map-right-controls_1x3ca_284","map-controls":"_map-controls_1x3ca_296","map-control":"_map-control_1x3ca_59","map-scale-control":"_map-scale-control_1x3ca_333","detail-panel-enter":"_detail-panel-enter_1x3ca_347","infodrawer-stack":"_infodrawer-stack_1x3ca_357","detail-panel":"_detail-panel_1x3ca_42","adaptive-width":"_adaptive-width_1x3ca_399","context-panel-holder":"_context-panel-holder_1x3ca_410","context-panel-from":"_context-panel-from_1x3ca_454","context-panel-enter":"_context-panel-enter_1x3ca_457","detail-panel-floating":"_detail-panel-floating_1x3ca_463","detail-panel-from":"_detail-panel-from_1x3ca_463","detail-panel-leave":"_detail-panel-leave_1x3ca_469","context-panel":"_context-panel_1x3ca_182"};function ye(e,t=0){const n=performance.now(),a={};function r(){a.id=requestAnimationFrame(o=>{o-n>t?e():r()})}return r(),a}function Ce(e){e.id&&cancelAnimationFrame(e.id)}function Ne(e,t){const[n,a]=s.useState(e?"enter":"from"),r=s.useRef({}),[o,i]=s.useState(e);return s.useEffect(function(){return Ce(r.current),e?(a("from"),i(!0),ye(()=>{a("enter")})):(a("leave"),r.current=ye(()=>{i(!1)},t)),()=>{Ce(r.current)}},[e,t]),{stage:n,shouldMount:o}}const F=x.styled(ue);function Fn(e){const t=s.useRef({maxWidth:200,unit:"metric"});return F(X,{className:"map-scale-control",control:U.ScaleControl,options:t.current,...e})}function $n(e){const t=s.useRef({showAccuracyCircle:!0,showUserLocation:!0,trackUserLocation:!0,positionOptions:{enableHighAccuracy:!0}});return F(X,{control:U.GeolocateControl,options:t.current,...e})}function Hn({children:e}){const{isInitialized:t}=le();return t?F("div.map-controls",[F(Fn),F(pn,{className:"map-3d-control"}),F(un,{className:"compass-control"}),F(ln,{className:"globe-control"}),F($n,{className:"geolocation-control"}),e]):null}const h=x.styled(ue),Wn=e=>h(ie,{...e,className:C("panel-card",e.className)});function jn({children:e,className:t,navbar:n,contextPanel:a=null,detailPanel:r=null,detailPanelOpen:o,contextPanelOpen:i=!0,bottomPanel:l=null,mainPanel:c,mapControls:u=h(Hn),contextStackProps:p=null,detailStackProps:f=null,detailPanelStyle:m="floating",fitViewport:y=!0,showPanelOutlines:E=!1,preventMapInteraction:P=!1,...S}){const v=o??r!=null,b=Ne(i,800),_=Ne(v,800),w=C("map-container",t,`detail-panel-${m}`,`context-panel-${b.stage}`,`map-context-${b.stage}`,`detail-panel-${_.stage}`,`map-detail-${_.stage}`,{"detail-panel-open":v,"map-context-open":i,"show-panel-outlines":E,"fit-viewport":y}),N=h([h(dn,{className:"zoom-control"}),h("div.spacer"),u]),B=h("div.detail-stack.infodrawer-container",f,[h("div.detail-panel-holder",null,r),h.if(m=="floating")([N])]);return h(Xn,{className:w},[h("div.main-row",[h("div.map-ui",{...S},[h(Un,{navbar:n,...p},[h.if(b.shouldMount)([a])]),e??c,h.if(m=="floating")([B]),h.if(m=="fixed")("div.map-control-stack",N)]),h.if(m=="fixed")([B])]),h("div.bottom",null,l)])}function Un(e){const{adaptiveWidth:t,navbar:n,children:a,...r}=e,o=it(r,{"adaptive-width":t});return h("div.context-stack",o,[n,h("div.context-panel-holder",null,a),h("div.spacer")])}const Vn=({children:e})=>h(ct,h(en,e)),Zn=e=>h(Vn,h(jn,e));function Xn({className:e,children:t}){const n=$e();if(n!=null){const{mapIsRotated:a,mapUse3D:r,mapIsGlobal:o}=ze(n);e=C(e,{"map-is-rotated":a,"map-3d-available":r,"map-is-global":o})}return h("div",{className:e},t)}function Yn(e,t){var n=s.useRef(null),a=s.useRef(null);a.current=t;var r=s.useRef(null);s.useEffect(function(){o()});var o=s.useCallback(function(){var i=r.current,l=a.current,c=i||(l?l instanceof Element?l:l.current:null);n.current&&n.current.element===c&&n.current.subscriber===e||(n.current&&n.current.cleanup&&n.current.cleanup(),n.current={element:c,subscriber:e,cleanup:c?e(c):void 0})},[e]);return s.useEffect(function(){return function(){n.current&&n.current.cleanup&&(n.current.cleanup(),n.current=null)}},[]),s.useCallback(function(i){r.current=i,o()},[o])}function Se(e,t,n){return e[t]?e[t][0]?e[t][0][n]:e[t][n]:t==="contentBoxSize"?e.contentRect[n==="inlineSize"?"width":"height"]:void 0}function Xe(e){e===void 0&&(e={});var t=e.onResize,n=s.useRef(void 0);n.current=t;var a=e.round||Math.round,r=s.useRef(),o=s.useState({width:void 0,height:void 0}),i=o[0],l=o[1],c=s.useRef(!1);s.useEffect(function(){return c.current=!1,function(){c.current=!0}},[]);var u=s.useRef({width:void 0,height:void 0}),p=Yn(s.useCallback(function(f){return(!r.current||r.current.box!==e.box||r.current.round!==a)&&(r.current={box:e.box,round:a,instance:new ResizeObserver(function(m){var y=m[0],E=e.box==="border-box"?"borderBoxSize":e.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",P=Se(y,E,"inlineSize"),S=Se(y,E,"blockSize"),v=P?a(P):void 0,b=S?a(S):void 0;if(u.current.width!==v||u.current.height!==b){var _={width:v,height:b};u.current.width=v,u.current.height=b,n.current?n.current(_):c.current||l(_)}})}),r.current.instance.observe(f,{box:e.box}),function(){r.current&&r.current.instance.unobserve(f)}},[e.box,a]),e.ref);return s.useMemo(function(){return{ref:p,width:i.width,height:i.height}},[p,i.width,i.height])}function Jn(e,t){return{left:Math.max(e.left-t.left,0),top:Math.max(e.top-t.top,0),right:Math.max(t.right-e.right,0),bottom:Math.max(t.bottom-e.bottom,0)}}function ne(e,t){var r,o;const n=(r=t.current)==null?void 0:r.getBoundingClientRect(),a=(o=e.current)==null?void 0:o.getBoundingClientRect();if(!(n==null||a==null))return Jn(n,a)}function qn(e,t,n){s.useEffect(()=>{var o;const a=e.current;if(a==null)return;if(n==null){(o=t.current)==null||o.remove();return}const r=t.current??new U.Marker;return r.setLngLat(n).addTo(a),t.current=r,()=>r.remove()},[e.current,n])}function Kn({containerRef:e}){const t=R(),n=s.useRef(Me(()=>{var a;(a=t.current)==null||a.resize()},100));return Xe({ref:e,onResize:n.current}),null}function Qn({containerRef:e,parentRef:t,infoMarkerPosition:n}){const a=R(),[r,o]=s.useState(ne(e,t)),i=s.useCallback(()=>{const l=ne(e,t);o(l)},[e.current,t.current]);return s.useEffect(()=>{a.current!=null&&i()},[a.current]),Xe({ref:t,onResize(l){i()}}),_n(n,r),null}function ea({onMapMoved:e=null}){const t=R(),n=ce(),a=s.useCallback(()=>{const r=t.current;if(r==null)return;const o=Vt(r);n({type:"map-moved",payload:o}),e==null||e(o,r)},[t.current,e,n]);return s.useEffect(()=>{const r=t.current;if(r==null)return;a();const o=Me(a,100);return r.on("moveend",o),()=>{r==null||r.off("moveend",o)}},[a]),null}function ta({ignoredSources:e,onMapLoading:t=null,onMapIdle:n=null,mapIsLoading:a}){const r=R(),o=s.useRef(!1),i=ce();return s.useEffect(()=>{const l=r.current,c=o.current;if(l==null)return;let u=!1;const p=m=>{e.includes(m.sourceId)||c||u||(t==null||t(m),i({type:"set-loading",payload:!0}),o.current=!0,u=!0)},f=m=>{c&&(i({type:"set-loading",payload:!1}),o.current=!1,n==null||n(m))};return l.on("sourcedataloading",p),l.on("idle",f),()=>{l==null||l.off("sourcedataloading",p),l==null||l.off("idle",f)}},[e,r.current,a]),null}function na({position:e,setPosition:t,centerMarker:n=!0}){const a=R(),r=s.useRef(null);qn(a,r,e);const o=s.useCallback(i=>{var l;t(i.lngLat,i,a.current),n&&((l=a.current)==null||l.flyTo({center:i.lngLat,duration:800}))},[a.current,t]);return s.useEffect(()=>{const i=a.current;return i!=null&&t!=null&&i.on("click",o),()=>{i==null||i.off("click",o)}},[a.current,t]),null}function Ye(e,t,n=null){var i;if(!((i=e.style)!=null&&i._loaded)){e.once("style.load",()=>{Ye(e,t,n)});return}const a=aa(e);let r=n??a??"mapbox-dem";console.log("Enabling 3D terrain with source",r);const o=e.getTerrain();if(!t){o!=null&&e.setTerrain(null);return}o==null&&(e.getSource(r)==null&&e.addSource(r,{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),e.getLayer("sky")==null&&e.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,0],"sky-atmosphere-sun-intensity":15}}),e.setTerrain({source:r,exaggeration:1}),console.log(e.getTerrain()))}function aa(e){for(const[t,n]of Object.entries(e.getStyle().sources))if(n.type=="raster-dem")return t;return null}const H=x.styled(ue);function ra(e,t={}){const{mapPosition:n,...a}=t;console.log("Initializing map (default)",t);const r=new re.Map({container:e,maxZoom:18,logoPosition:"bottom-left",trackResize:!0,antialias:!0,optimizeForTerrain:!0,...a});return n!=null&&Zt(r,n),r}const oa={camera:{lat:34,lng:-120,altitude:3e5}};function ia(e){var V,Z;let{terrainSourceID:t}=e;const{enableTerrain:n=!0,style:a,mapPosition:r=oa,initializeMap:o=ra,children:i,mapboxToken:l,accessToken:c,infoMarkerPosition:u,transformRequest:p,projection:f,onMapLoaded:m=null,onStyleLoaded:y=null,onMapMoved:E=null,...P}=e;n&&(t??(t="mapbox-3d-dem"));const S=l??c;S!=null&&(re.accessToken=S);const v=ce();let b=R();const _=s.useRef(),w=s.useRef();s.useEffect(()=>{console.log("Map updated",b.current)},[b.current]),s.useEffect(()=>{if(a==null)return;if(b.current!=null){console.log("Setting style",a),b.current.setStyle(a);return}const M=o(_.current,{style:a,projection:f,mapPosition:r,...P});M.setPadding(ne(_,w),{animate:!1}),M.on("style.load",()=>{y==null||y(M),v({type:"set-style-loaded",payload:!0})}),m==null||m(M),v({type:"set-map",payload:M})},[a]);const N=$e(),{mapUse3D:B,mapIsRotated:T}=ze(N),K=((Z=(V=b.current)==null?void 0:V.getProjection())==null?void 0:Z.name)??"mercator",Q=C({"is-rotated":T??!1,"is-3d-available":B??!1},`${K}-projection`);return H("div.map-view-container.main-view",{ref:w},[H("div.mapbox-map#map",{ref:_,className:Q}),H(ta,{ignoredSources:["elevationMarker","crossSectionEndpoints"]}),H(ea,{onMapMoved:E}),H(Kn,{containerRef:_}),H(Qn,{containerRef:_,parentRef:w,infoMarkerPosition:u}),H(sa,{mapUse3D:B,terrainSourceID:t}),i])}function sa({mapUse3D:e,terrainSourceID:t}){const n=R();return s.useEffect(()=>{const a=n.current;a!=null&&Ye(a,e,t)},[n.current,e]),null}const la="_key_1fmc3_7",ca="_value_1fmc3_18",ua="_unit_1fmc3_62",da="_page_1fmc3_68",Je={"feature-panel":"_feature-panel_1fmc3_2","key-value":"_key-value_1fmc3_7",key:la,value:ca,"feature-properties":"_feature-properties_1fmc3_22","feature-header":"_feature-header_1fmc3_32","feature-group":"_feature-group_1fmc3_37","tile-info":"_tile-info_1fmc3_45","opacity-slider":"_opacity-slider_1fmc3_54","unit-number":"_unit-number_1fmc3_62",unit:ua,page:da,"dev-index-page":"_dev-index-page_1fmc3_73"};var pa=Math.PI/180,fa=180/Math.PI;function qe(e){var t=we(e[0]+1,e[2]),n=we(e[0],e[2]),a=Re(e[1]+1,e[2]),r=Re(e[1],e[2]);return[n,a,t,r]}function ma(e){var t=qe(e),n={type:"Polygon",coordinates:[[[t[0],t[3]],[t[0],t[1]],[t[2],t[1]],[t[2],t[3]],[t[0],t[3]]]]};return n}function we(e,t){return e/Math.pow(2,t)*360-180}function Re(e,t){var n=Math.PI-2*Math.PI*e/Math.pow(2,t);return fa*Math.atan(.5*(Math.exp(n)-Math.exp(-n)))}function ae(e,t,n){var a=at(e,t,n);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function Ke(e){return[[e[0]*2,e[1]*2,e[2]+1],[e[0]*2+1,e[1]*2,e[2]+1],[e[0]*2+1,e[1]*2+1,e[2]+1],[e[0]*2,e[1]*2+1,e[2]+1]]}function Qe(e){return[e[0]>>1,e[1]>>1,e[2]-1]}function et(e){return Ke(Qe(e))}function ha(e,t){for(var n=et(e),a=0;a<n.length;a++)if(!tt(t,n[a]))return!1;return!0}function tt(e,t){for(var n=0;n<e.length;n++)if(nt(e[n],t))return!0;return!1}function nt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function _a(e){for(var t="",n=e[2];n>0;n--){var a=0,r=1<<n-1;e[0]&r&&a++,e[1]&r&&(a+=2),t+=a.toString()}return t}function ga(e){for(var t=0,n=0,a=e.length,r=a;r>0;r--){var o=1<<r-1,i=+e[a-r];i===1&&(t|=o),i===2&&(n|=o),i===3&&(t|=o,n|=o)}return[t,n,a]}function va(e){var t=ae(e[0],e[1],32),n=ae(e[2],e[3],32),a=[t[0],t[1],n[0],n[1]],r=ba(a);if(r===0)return[0,0,0];var o=a[0]>>>32-r,i=a[1]>>>32-r;return[o,i,r]}function ba(e){for(var t=28,n=0;n<t;n++){var a=1<<32-(n+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return n}return t}function at(e,t,n){var a=Math.sin(t*pa),r=Math.pow(2,n),o=r*(e/360+.5),i=r*(.5-.25*Math.log((1+a)/(1-a))/Math.PI);return o=o%r,o<0&&(o=o+r),[o,i,n]}var xa={tileToGeoJSON:ma,tileToBBOX:qe,getChildren:Ke,getParent:Qe,getSiblings:et,hasTile:tt,hasSiblings:ha,tilesEqual:nt,tileToQuadkey:_a,quadkeyToTile:ga,pointToTile:ae,bboxToTile:va,pointToTileFraction:at};function ya({tile:e,color:t="red"}){const n=s.useCallback((r,o)=>{const i=r.getStyle();if(i.layers==null)return;if(i.layers=i.layers.filter(y=>y.id!="tile-extent"),o==null)return r.setStyle(i);const{x:l,y:c,z:u}=o,f={type:"geojson",data:xa.tileToGeoJSON([l,c,u])},m={id:"tile-extent",type:"line",source:"tile-extent",paint:{"line-color":t,"line-width":2}};i.sources["tile-extent"]=f,i.layers.push(m),r.setStyle(i)},[t]),a=R();return tn(a,e,n),null}const Ca="_title_1db2p_22",rt={"panel-subhead":"_panel-subhead_1db2p_1",title:Ca,"info-panel-section":"_info-panel-section_1db2p_26","expansion-panel":"_expansion-panel_1db2p_30","sub-expansion-panel":"_sub-expansion-panel_1db2p_36","expansion-panel-header":"_expansion-panel-header_1db2p_40","expansion-summary-title-help":"_expansion-summary-title-help_1db2p_63","expansion-children":"_expansion-children_1db2p_80","expansion-panel-subtext":"_expansion-panel-subtext_1db2p_91","expandable-details-main":"_expandable-details-main_1db2p_107","expandable-details-header":"_expandable-details-header_1db2p_115","expandable-details-children":"_expandable-details-children_1db2p_122","expandable-details-toggle":"_expandable-details-toggle_1db2p_126","expandable-details":"_expandable-details_1db2p_107","macrostrat-unit":"_macrostrat-unit_1db2p_130","expansion-body":"_expansion-body_1db2p_140","expansion-panel-detail-header":"_expansion-panel-detail-header_1db2p_151","expansion-panel-detail-body":"_expansion-panel-detail-body_1db2p_162"},Ee=x.styled(rt);function Na(e){const{title:t,component:n="h3",children:a,...r}=e;return Ee("div.panel-subhead",r,[Ee(n,{className:"title"},t),a])}const L=x.styled(rt);function Sa(e){const{expanded:t,children:n,onChange:a,className:r,title:o,titleComponent:i}=e,l=t?"chevron-up":"chevron-down";return L(Na,{className:C("expansion-panel-header",r),onClick:a,title:o,component:i},[n,L(Te,{icon:l})])}function wa(e){let{title:t,titleComponent:n="h3",children:a,expanded:r,helpText:o,onChange:i=()=>{},sideComponent:l=null,className:c}=e;const[u,p]=s.useState(r||!1),f=()=>{i(),p(!u)};return L("div.expansion-panel-base",{className:C(c,{expanded:u,collapsed:!u})},[L(Sa,{onChange:f,expanded:u,title:t,titleComponent:n},L("div.expansion-summary-title-help",[L("span.expansion-panel-subtext",o)," ",l])),L($t,{isOpen:u},L("div.expansion-children",null,a))])}function ke(e){return L(wa,{...e,className:"expansion-panel"})}const d=x.styled(Je);function Ra({data:e,...t}){return d("div.feature-properties",[d(dt,{data:e,hideRoot:!0,...t})])}function Ea({feature:e}){const t=e.properties;return d("div.feature-record",[d.if(Object.keys(t).length>0)(Ra,{data:t})])}function ka({selectedLocation:e,setFeatures:t,radius:n=2}){const a=R(),{isLoading:r}=le(),o=ut(e);return s.useEffect(()=>{const i=a==null?void 0:a.current;if(i==null)return;if(e==null){t(null);return}if(e==o)return;const l=n,c=i.project(e),u=[[c.x-l,c.y-l],[c.x+l,c.y+l]],p=i.queryRenderedFeatures(u);t(p)},[a==null?void 0:a.current,e,r]),null}function Pa({feature:e}){return d("div.feature-header",[d("h3",[d(j,{label:"Source",value:e.source}),d(j,{label:"Source layer",value:e.sourceLayer})])])}function j({label:e,value:t}){return d("span.key-value",[d("span.key",e),d("code.value",t)])}function Ma({features:e,sourceID:t}){const n=R();if((n==null?void 0:n.current)==null)return null;const[a,r]=s.useState(!1),o=e.filter(i=>i.source=="burwell");return s.useEffect(()=>{if(o.length>0){r(!0);return}const i=n.current.isSourceLoaded(t);r(i),i||n.current.once("sourcedata",l=>{l.sourceId==t&&r(!0)})},[n.current,t,o.length]),a?d(ot,{features:o}):d(Oe)}function Oa({feature:e,showExtent:t,setShowExtent:n}){if(e==null)return null;const a=e._vectorTileFeature._pbf.length;return d("div.tile-info",[d("h3","Tile"),d("div.tile-index",[d(j,{label:"x",value:e._x}),d(j,{label:"y",value:e._y}),d(j,{label:"z",value:e._z})]),d("div.spacer"),d(j,{label:"Size",value:Ta(a)}),d(Ie,{label:"Show extent",alignIndicator:"right",checked:t,onChange(){n(!t)}})])}function Ta(e){return e>1e6?d(Pe,{value:e/1e6,unit:"Mb"}):e>1e3?d(Pe,{value:e/1e3,unit:"Kb"}):`${e} bytes`}function Pe({value:e,unit:t,precision:n=1}){return d("span.unit-number",[d("span.number",e.toFixed(n)),d("span.unit",t)])}function La({features:e,focusedSource:t=null,focusedSourceTitle:n=null}){if(e==null)return null;let a=null,r=e,o="Features";return t!=null&&(o="Basemap features",a=d(ke,{title:"Macrostrat features",className:"macrostrat-features",expanded:!0},[d(Ma,{features:e,sourceID:t})]),r=e.filter(i=>i.source!=t)),d("div.feature-panel",[a,d(ke,{title:o,className:"basemap-features",expanded:t==null},[d(Ia,{features:r})])])}function Ia({features:e}){if(e==null)return null;const t=Gt(e,n=>`${n.source} - ${n.sourceLayer}`);return d("div.feature-groups",Array.from(t).map(([n,a])=>d("div.feature-group",[d(Pa,{feature:a[0]}),d(ot,{features:a})])))}function ot({features:e}){return d("div.features",e.map((t,n)=>d(Ea,{key:n,feature:t})))}const k=x.styled(Je);function Qa({title:e="Map inspector",headerElement:t=null,transformRequest:n=null,mapPosition:a=null,mapboxToken:r=null,overlayStyle:o=null,children:i,style:l,focusedSource:c=null,focusedSourceTitle:u=null,projection:p=null}){const f=pt(),m=f==null?void 0:f.isEnabled;r!=null&&(re.accessToken=r),l??(l=m?"mapbox://styles/mapbox/dark-v10":"mapbox://styles/mapbox/light-v10");const[y,E]=s.useState(!1),[P,S]=ft("macrostrat:dev-map-page",{showTileExtent:!1,xRay:!1}),{showTileExtent:v,xRay:b}=P,[_,w]=s.useState(l);s.useEffect(()=>{zn(l,o,{mapboxToken:r,inDarkMode:m,xRay:b}).then(w)},[l,b,r,m,o]);const[N,B]=s.useState(null),[T,K]=s.useState(null),Q=s.useCallback(M=>{B(M)},[]);let V=null;N!=null&&(V=k(Tn,{onClose(){B(null)},position:N},[k(Oa,{feature:(T==null?void 0:T[0])??null,showExtent:v,setShowExtent(){S({...P,showTileExtent:!v})}}),k(La,{features:T,focusedSource:c,focusedSourceTitle:u})]));let Z=null;if(v&&(T==null?void 0:T[0])!=null){let M=T[0];Z={x:M._x,y:M._y,z:M._z}}return k(Zn,{navbar:k(Nn,[t??k("h2",e),k(mt),k(Cn,{active:y,onClick:()=>E(!y)})]),contextPanel:k(Wn,[k(Ie,{checked:b,label:"X-ray mode",onChange(){S({...P,xRay:!b})}}),i]),detailPanel:V,contextPanelOpen:y},k(ia,{style:_,transformRequest:n,mapPosition:a,projection:{name:"globe"},mapboxToken:r},[k(ka,{selectedLocation:N,setFeatures:K}),k(na,{position:N,setPosition:Q}),k(ya,{tile:Z,color:m?"white":"black"})]))}export{Qa as D,Zn as M};
