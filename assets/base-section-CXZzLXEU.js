import{m as g,b as K,l as je}from"./index.modern-CqpcyjV2.js";import{r as h,R as Ye}from"./index-BBkUAzwr.js";import{i as Xe,l as T,h as u,v as Ke,p as V,e as be,a as Je,b as Ze,r as Qe,c as et,d as R,s as pe,f as tt,g as nt,t as ot,j as J,P as ye,k as st,S as it,T as rt,m as lt,I as at}from"./index-C9bLEcPW.js";import{P as a}from"./index-_4_hgnnR.js";import{S as xe,c as ct}from"./index-BQakYib5.js";import{a as dt}from"./toaster-CUxSLCcg.js";import{c as I}from"./index-DtBkkNk_.js";import{r as Z}from"./index-PqR-_bA4.js";import{_ as _e,B as ut}from"./buttons-ClSVyNZf.js";import{c as ve}from"./chroma-Bi8DEGLa.js";import{I as ht}from"./classes-BP-FkMqc.js";import{a as pt}from"./Google-cn5MAfvL.js";import"./isUndefined-CmGWwQE3.js";const mt="_handle_m6xcw_16",ft="_note_m6xcw_5",gt="_link_m6xcw_60",bt="_new_arrow_start_m6xcw_1",yt="_new_arrow_end_m6xcw_1",xt="_frame_m6xcw_109",_t="_lithology_m6xcw_109",vt="_definite_m6xcw_119",Ct="_y_m6xcw_134",wt="_axis_m6xcw_134",kt="_overlay_m6xcw_155",Pt="_grainsize_m6xcw_159",It="_rotated_m6xcw_159",St="_top_m6xcw_26",Nt="_bottom_m6xcw_27",Dt="_error_m6xcw_197",Tt="_samples_m6xcw_205",Ht="_sample_m6xcw_205",Rt={"column-notes":"_column-notes_m6xcw_1","col-note-label":"_col-note-label_m6xcw_1","note-editor":"_note-editor_m6xcw_5","bp4-editable-text":"_bp4-editable-text_m6xcw_5","position-editor":"_position-editor_m6xcw_16",handle:mt,"add-span-handle":"_add-span-handle_m6xcw_21","top-handle":"_top-handle_m6xcw_26","bottom-handle":"_bottom-handle_m6xcw_27","note-connector":"_note-connector_m6xcw_32","height-range":"_height-range_m6xcw_45",note:ft,link:gt,"new-note":"_new-note_m6xcw_67",new_arrow_start:bt,new_arrow_end:yt,"column-image":"_column-image_m6xcw_83","interval-editor-title":"_interval-editor-title_m6xcw_89","lithology-column":"_lithology-column_m6xcw_109",frame:xt,lithology:_t,definite:vt,"covered-area":"_covered-area_m6xcw_123","covered-column":"_covered-column_m6xcw_129",y:Ct,axis:wt,"section-outer":"_section-outer_m6xcw_149",overlay:kt,grainsize:Pt,rotated:It,top:St,bottom:Nt,error:Dt,samples:Tt,sample:Ht,"photo-dialog":"_photo-dialog_m6xcw_216","image-gallery-image":"_image-gallery-image_m6xcw_222","symbol-column-area":"_symbol-column-area_m6xcw_226","triangle-bars":"_triangle-bars_m6xcw_230","Select-menu-outer":"_Select-menu-outer_m6xcw_236","edit-overlay":"_edit-overlay_m6xcw_240","cursor-container":"_cursor-container_m6xcw_240","bp4-popover-wrapper":"_bp4-popover-wrapper_m6xcw_244"},me=Symbol("implicit");function Ce(){var s=new Map,e=[],t=[],n=me;function o(i){var r=i+"",l=s.get(r);if(!l){if(n!==me)return n;s.set(r,l=e.push(i))}return t[(l-1)%t.length]}return o.domain=function(i){if(!arguments.length)return e.slice();e=[],s=new Map;for(const r of i){const l=r+"";s.has(l)||s.set(l,e.push(r))}return o},o.range=function(i){return arguments.length?(t=Array.from(i),o):t.slice()},o.unknown=function(i){return arguments.length?(n=i,o):n},o.copy=function(){return Ce(e,t).unknown(n)},Xe.apply(o,arguments),o}const C=h.createContext({scale:T(),divisions:[],scaleClamped:T().clamp(!0),pixelsPerMeter:1,zoom:1});function Ft(s){let{children:e,pixelsPerMeter:t=20,zoom:n=1,height:o,range:i,divisions:r=[],width:l=150,axisType:c="height",...d}=s;const p=JSON.stringify(d),m=Ye.useRef(null);p!==m.current&&(m.current=p,Object.keys(d).length>0&&console.warn("Passing extra properties to ColumnProvider is deprecated:",d));const f=h.useMemo(()=>{i!=null?o=Math.abs(i[1]-i[0]):i=[0,o];const b=o*t*n,x=T().domain(i).range([b,0]),v=x.copy().clamp(!0);return{pixelsPerMeter:t,pixelHeight:b,zoom:n,range:i,height:o,scale:x,scaleClamped:v,divisions:r,width:l,axisType:c,...d}},[c,o,t,i,n,r,l,m.current]);return u(C.Provider,{value:f},e)}const Et=()=>h.useContext(C).divisions,P=h.createContext({scale:null,width:0,divisions:[],grainSizes:[],grainsizeScale:s=>40});function Q({children:s,width:e,grainSizes:t=[],grainsizeScale:n=o=>40}){const o=h.useContext(C);return g(P.Provider,{value:{...o,width:e,grainSizes:t,grainsizeScale:n}},s)}const $=class $ extends h.Component{render(){let{domain:e,range:t,width:n,children:o}=this.props;t==null&&(t=[0,n]);const i=T().domain(e).range(t);return g(Q,{xScale:i,width:n,children:o})}};$.propTypes={width:a.number.isRequired,domain:a.arrayOf(a.number).isRequired,range:a.arrayOf(a.number)},$.contextType=C;let A=$;function Ut({width:s,grainSizes:e=["ms","s","vf","f","m","c","vc","p"],grainsizeScaleStart:t=50,grainsizeScaleRange:n,tickPositions:o,children:i}){n==null&&console.warn("GrainsizeLayoutProvider: grainsizeScaleStart and width are deprecated in favor of grainsizeScaleRange"),n??(n=[t,s]);const r=Et(),l=h.useMemo(()=>{const p=T().domain([0,e.length-1]).range(n);return o??(o=e.map((m,f)=>p(f))),Ce().domain(e).range(o)},[e,n,o]),c=h.useCallback(p=>{let m=r.indexOf(p);for(;m>0;){const{grainsize:f}=r[m];if(f!=null)return f;m-=1}},[r]),d=h.useCallback(p=>p==null?s:l(c(p)),[c,l,s]);return g(Q,{width:s,grainSizes:e,grainsizeScale:l,grainsizeScaleStart:t,grainsizeScaleRange:n,grainsizeForDivision:c,widthForDivision:d},i)}A.__docgenInfo={description:"",methods:[],displayName:"CrossAxisLayoutProvider",props:{width:{description:"",type:{name:"number"},required:!0},domain:{description:"",type:{name:"arrayOf",value:{name:"number"}},required:!0},range:{description:"",type:{name:"arrayOf",value:{name:"number"}},required:!1}}};const M=h.createContext({facies:[],onColorChanged(){}});class Lt extends xe{constructor(e){super(e),this.state={facies:e.initialFacies||[],__colorMap:{}},this.getFaciesColor=this.getFaciesColor.bind(this),this.setFaciesColor=this.setFaciesColor.bind(this)}getFaciesColor(e){const{__colorMap:t}=this.state;return t[e]||null}setFaciesColor(e,t){const n=this.state.facies.findIndex(o=>o.id===e);return this.updateState({facies:{[n]:{color:{$set:t}}}})}render(){const{facies:e}=this.state,{children:t,...n}=this.props,i={facies:e,...this,...n};return u(M.Provider,{value:i},t)}}Lt.__docgenInfo={description:"",methods:[{name:"getFaciesColor",docblock:null,modifiers:[],params:[{name:"id",optional:!1,type:null}],returns:null},{name:"setFaciesColor",docblock:null,modifiers:[],params:[{name:"id",optional:!1,type:null},{name:"color",optional:!1,type:null}],returns:null}],displayName:"FaciesProvider"};ct({});h.createContext({lithologies:[]});const we=h.createContext({resolveSymbol(){}});a.func.isRequired;h.createContext(null);a.func.isRequired,a.func.isRequired;class H extends h.Component{constructor(e){super(e),this.UUID=Ke()}}h.createContext(null);class B extends h.Component{static initClass(){this.contextType=P,this.propTypes={id:a.string.isRequired}}render(){const{pixelHeight:e,width:t}=this.context;let{id:n}=this.props;return n.startsWith("#")&&(n=n.slice(1)),u("rect",{id:n,x:0,y:0,width:t,height:e,key:n})}}B.initClass();class z extends h.Component{static initClass(){this.contextType=P}render(){let e;const{scale:t,divisions:n,grainsizeScale:o}=this.context;let{id:i}=this.props;if(i.startsWith("#")&&(i=i.slice(1)),n.length===0)return null;const[r,l]=t.domain(),c=function(b){let{top:x}=b;return x>l&&(x=l),t(x)},d=function(b){let{bottom:x}=b;return x<r&&(x=r),t(x)},p=n.filter(function(b){return!(b.top<=r||b.bottom>l)});let m=null,f="m";for(e of Array.from(p)){m==null&&(m=V(),m.moveTo(0,d(e))),e.grainsize!=null&&(f=e.grainsize);const b=o(f);m.lineTo(b,d(e)),m.lineTo(b,c(e))}return m.lineTo(0,c(e)),m.closePath(),u("path",{id:i,key:i,d:m.toString()})}}z.initClass();const ke=function(s){let{id:e,children:t,...n}=s;return e.startsWith("#")&&(e=e.slice(1)),h.createElement("clipPath",{id:e,key:e,...n},t)},fe=function(s){const{id:e,...t}=s;return u("use.frame",{xlinkHref:e,fill:"transparent",key:"frame",...t})},qt=function(s,e){const t={};for(let n of Array.from(e))t[n+"ID"]=`#${s}-${n}`;return t},ge=function(s,e){const{width:t,frame:n}=s,o=t!=null,i=n!=null;if(!(o||i))return new Error("Provide either 'width' or 'frame' props")};class ee extends H{constructor(...e){super(...e),this.computeTransform=this.computeTransform.bind(this)}static initClass(){this.defaultProps={onClick:null,shiftY:0},this.propTypes={left:a.number,shiftY:a.number,onClick:a.func,frame:ge,width:ge}}computeTransform(){const{left:e,shiftY:t}=this.props;return e==null?null:`translate(${e} ${t})`}render(){let{children:e,frame:t,className:n,onClick:o}=this.props;if(t==null){const{width:c}=this.props;t=d=>u(B,{width:c,...d})}const i=this.computeTransform(),{frameID:r,clipID:l}=qt(this.UUID,["frame","clip"]);return u("g",{className:n,transform:i,onClick:o},[u("defs",{key:"defs"},[u(t,{id:r}),u(ke,{id:l},u(fe,{id:r}))]),u("g.inner",{clipPath:`url(${l})`},e),u(fe,{id:r})])}}ee.initClass();B.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"SimpleFrame"};z.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"GrainsizeFrame"};ke.__docgenInfo={description:"",methods:[],displayName:"ClipPath"};H.__docgenInfo={description:"",methods:[],displayName:"UUIDComponent"};ee.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null},{name:"computeTransform",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ClipToFrame"};const Ot=function(s,e){const t={},n={};for(let o in e){const i=e[o];s.includes(o)?t[o]=i:n[o]=i}return[t,n]};class Pe extends h.Component{constructor(...e){super(...e),this.scrollTo=this.scrollTo.bind(this)}static initClass(){this.contextType=C,this.propTypes={scrollToHeight:a.number,alignment:a.oneOf(["center","top","bottom"]),animated:a.bool,onScrolled:a.func,paddingTop:a.number,scrollContainer:a.func.isRequired},this.defaultProps={animated:!0,alignment:"center",onScrolled(e){return console.log(`Scrolled to ${e} m`)},scrollContainer(){return document.querySelector(".panel-container")}}}render(){const e=Object.keys(this.constructor.propTypes),[t,n]=Ot(e,this.props),{pixelHeight:o}=this.context;return g(_e,{height:o,position:"absolute",...n})}scrollTo(e,t={}){let n=Z.findDOMNode(this);const{paddingTop:o}=this.props,{scale:i}=this.context,r=i(e),{top:l}=n.getBoundingClientRect();n=this.props.scrollContainer();let c=r+l+o;const d=window.innerHeight;return this.props.alignment==="center"?c-=d/2:this.props.alignment==="bottom"&&(c-=d),n.scrollTop=c}componentDidMount(){const{scrollToHeight:e,alignment:t}=this.props;if(e!=null)return this.scrollTo(e,{alignment:t,animated:!1}),this.props.onScrolled(e)}componentDidUpdate(e){const{scrollToHeight:t,animated:n,alignment:o}=this.props;if(t!=null&&e.scrollToHeight!==t)return this.scrollTo(t,{alignment:o,animated:n}),this.props.onScrolled(t)}}Pe.initClass();Pe.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null},{name:"scrollTo",docblock:null,modifiers:[],params:[{name:"height",optional:!1,type:null},{name:"opts",optional:!0,type:null}],returns:null}],displayName:"ColumnScroller"};const $t={xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},Ie=h.forwardRef(function(s,e){const{innerRef:t,children:n,style:o,...i}=be(s);t!=null&&(e=t);const{paddingLeft:r,paddingTop:l}=Je(s),c=Ze(s),d=Qe(et(i));return g("svg",{ref:e,style:{...c,...o},...d,...$t},g("g",{transform:`translate(${r},${l})`},n))}),Se=s=>h.createElement("foreignObject",s),Ne=function(s){const{children:e,className:t,innerRef:n,style:o,...i}=s,{pixelHeight:r}=h.useContext(C),l=be({innerHeight:r,...i}),{paddingLeft:c,paddingTop:d,innerHeight:p,innerWidth:m,height:f,width:b,...x}=l;return g(Ie,{className:I(t,"section"),height:f,width:b,innerRef:n,...x,style:o},g("g.backdrop",{transform:`translate(${c},${d})`},e))};Ie.__docgenInfo={description:"",methods:[],displayName:"SVG"};Se.__docgenInfo={description:"",methods:[],displayName:"ForeignObject"};const y=K(Rt),Mt=s=>s.top_height!=null,S=a.shape({height:a.number.isRequired,note:a.string,top_height:a.number,symbol:a.string});class te{constructor(e,t,n){this.allowedRange=e,this.centerPos=(this.allowedRange[0]+this.allowedRange[1])/2,this.currentPos=this.centerPos,this.width=t,this.data=n,this.layerIndex=0}get idealPos(){const[e,t]=this.allowedRange;return this.currentPos<t?t:this.currentPos>e?e:this.currentPos}distanceFrom(e){const t=this.width/2,n=e.width/2;return Math.max(this.currentPos-t,e.currentPos-n)-Math.min(this.currentPos+t,e.currentPos+n)}moveToIdealPosition(){return this.currentPos=this.idealPos,this}displacement(){return this.idealPos-this.currentPos}overlapWithNode(e,t=0){return this.distanceFrom(e)-t<0}overlapWithPoint(e){const t=this.width/2;return e>=this.currentPos-t&&e<=this.currentPos+t}positionBefore(e,t=0){return e.currentLeft()-this.width/2-t}positionAfter(e,t=0){return e.currentRight()+this.width/2+t}currentRight(){return this.currentPos+this.width/2}currentLeft(){return this.currentPos-this.width/2}idealRight(){return this.idealPos+this.width/2}idealLeft(){return this.idealPos-this.width/2}createStub(e){const t=new R.Node(this.idealPos,e,this.data);return t.currentPos=this.currentPos,t.child=this,this.parent=t,t}removeStub(){return this.parent&&(this.parent.child=null,this.parent=null),this}isStub(){return!!this.child}getPathToRoot(){const e=[];let t=this;for(;t;)e.push(t),t=t.parent;return e}getPathFromRoot(){return this.getPathToRoot().reverse()}getPathToRootLength(){let e=0,t=this;for(;t;){const n=t.parent?t.parent.currentPos:t.idealPos;e+=Math.abs(t.currentPos-n),t=t.parent}return e}getRoot(){let e=this,t=this;for(;t;)e=t,t=t.parent;return e}getLayerIndex(){return this.layerIndex}clone(){const e=new te(this.allowedRange,this.width,this.data);return e.currentPos=this.currentPos,e.layerIndex=this.layerIndex,e}}const N=h.createContext(null),Bt=function(){const s=[];return function(e){let t=0;const n=s.length+1;for(let o=0,i=n,r=0<=i;r?o<=i:o>=i;r?o++:o--)if(s[o]==null&&(s[o]=e.height),s[o]<e.height){const l=e.top_height||e.height;s[o]=l,t=o;break}return t}},zt=s=>function(e){const[t,n]=s.domain(),o=e.top_height||e.height;return t<n?o>=t&&e.height<=n:o<=t&&e.height>=n};class De extends xe{static initClass(){this.propTypes={notes:a.arrayOf(S).isRequired,width:a.number.isRequired,paddingLeft:a.number,noteComponent:a.func.isRequired,forceOptions:a.object},this.defaultProps={paddingLeft:60,estimatedTextHeight(e,t){return e.note,12}},this.contextType=C}constructor(e){super(e),this.computeContextValue=this.computeContextValue.bind(this),this.savedRendererForWidth=this.savedRendererForWidth.bind(this),this.generatePath=this.generatePath.bind(this),this.createNodeForNote=this.createNodeForNote.bind(this),this.computeForceLayout=this.computeForceLayout.bind(this),this.registerHeight=this.registerHeight.bind(this),this.updateNotes=this.updateNotes.bind(this),this.componentDidMount=this.componentDidMount.bind(this),this.componentDidUpdate=this.componentDidUpdate.bind(this);const{noteComponent:t}=this.props;this.state={notes:[],elementHeights:{},columnIndex:{},nodes:{},generatePath:this.generatePath,createNodeForNote:this.createNodeForNote,noteComponent:t}}render(){const{children:e,width:t}=this.props;return g(N.Provider,{value:this.state},g(Q,{width:t},e))}computeContextValue(){const{width:e,paddingLeft:t}=this.props,{pixelHeight:n,scaleClamped:o}=this.context,i={paddingLeft:t,scale:o,width:e,registerHeight:this.registerHeight,generatePath:this.generatePath},r=new R.Renderer({direction:"right",layerGap:t,nodeHeight:5});return this.setState({renderer:r,...i})}savedRendererForWidth(e){return this._rendererIndex==null&&(this._rendererIndex={}),this._rendererIndex[e]==null&&(this._rendererIndex[e]=new R.Renderer({direction:"right",layerGap:e,nodeHeight:5})),this._rendererIndex[e]}generatePath(e,t){const{paddingLeft:n}=this.props,o=this.savedRendererForWidth(n-t);try{return o.generatePath(e)}catch{return null}}createNodeForNote(e){const{notes:t,elementHeights:n}=this.state;let{pixelHeight:o,scaleClamped:i}=this.context;const{id:r}=e;o=n[r]||10;const l=5,c=i(e.height);if(Mt(e)){const d=i(e.top_height),p=[c-l,d+l];if(p[0]-p[1]>0)return new te(p,o)}return new R.Node(c,o)}computeForceLayout(e,t){let{notes:n,nodes:o,elementHeights:i}=this.state;const{pixelHeight:r,scale:l}=this.context,{width:c,paddingLeft:d,forceOptions:p}=this.props;if(n.length===0)return;const m=Object.keys(o).length===n.length;t==null&&(t={});const f=i===t.elementHeights||[];if(m&&f)return;const b=new R.Force({minPos:0,maxPos:r,nodeSpacing:0,...p}),x=n.map(this.createNodeForNote);b.nodes(x).compute(),o=b.nodes()||[];const v={};for(let _=0;_<o.length;_++){const k=o[_],w=n[_];v[w.id]=k}return this.updateState({nodes:{$set:v}})}registerHeight(e,t){if(t==null)return;const{elementHeights:n}=this.state;return n[e]=t,this.updateState({elementHeights:{$set:n}})}updateNotes(){const{scaleClamped:e}=this.context,t=this.props.notes.filter(zt(e)).sort((o,i)=>o.height-i.height),n=t.map(Bt());return this.setState({notes:t,columnIndex:n})}componentDidMount(){return this._previousContext=null,this.updateNotes(),this.computeContextValue()}componentDidUpdate(e,t){this.props.notes!==e.notes&&this.updateNotes();const{noteComponent:n}=this.props;if(n!==e.noteComponent&&this.setState({noteComponent:n}),this.computeForceLayout.call(...arguments),this.props.notes!==e.notes&&this.context!==this._previousContext)return this.computeContextValue(),this._previousContext=this.context}}De.initClass();De.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null},{name:"computeContextValue",docblock:null,modifiers:[],params:[],returns:null},{name:"savedRendererForWidth",docblock:null,modifiers:[],params:[{name:"width",optional:!1,type:null}],returns:null},{name:"generatePath",docblock:null,modifiers:[],params:[{name:"node",optional:!1,type:null},{name:"pixelOffset",optional:!1,type:null}],returns:null},{name:"createNodeForNote",docblock:null,modifiers:[],params:[{name:"note",optional:!1,type:null}],returns:null},{name:"computeForceLayout",docblock:null,modifiers:[],params:[{name:"prevProps",optional:!1,type:null},{name:"prevState",optional:!1,type:null}],returns:null},{name:"registerHeight",docblock:null,modifiers:[],params:[{name:"id",optional:!1,type:null},{name:"height",optional:!1,type:null}],returns:null},{name:"updateNotes",docblock:null,modifiers:[],params:[],returns:null}],displayName:"NoteLayoutProvider"};const ne=function(s){const{scale:e}=h.useContext(N),{height:t,top_height:n,offsetX:o,color:i,lineInset:r=2.5,...l}=s,c=e(t);let d=0;n!=null&&(d=Math.abs(e(n)-c));const p=c-d,m=d>2*r,f=`translate(${o},${p})`;return y("g.height-range",{transform:f,...l},[y.if(m)("line",{x1:0,x2:0,y1:r,y2:d-r}),y.if(!m)("circle",{r:2,transform:`translate(0,${d/2})`})])};ne.propTypes={height:a.number.isRequired,top_height:a.number,offsetX:a.number};ne.defaultProps={offsetX:0};const oe=h.forwardRef(function(s,e){let{offsetY:t,noteHeight:n,children:o}=s;const{width:i,paddingLeft:r}=h.useContext(N);n==null&&(n=0);const l=5;let c=t-n/2-l;return navigator.userAgent.includes("Safari")&&(c+=5),y(Se,{width:i-r+2*l,x:r-l,y:c,height:n+2*l,style:{overflowY:"visible"}},[y("div.note-inner",{ref:e,style:{margin:l}},o)])}),Wt=function(s){const{notes:e}=h.useContext(N);return e.indexOf(s)},Vt=function(s){let{note:e,node:t,index:n}=s;n==null&&(n=Wt(e));const{nodes:o,columnIndex:i,generatePath:r}=h.useContext(N),{height:l,top_height:c}=e;t==null&&(t=o[e.id]);const d=(i[n]||0)*5;return y([y(ne,{offsetX:d,height:l,top_height:c}),y("path.link.col-note-link",{d:r(t,d),transform:`translate(${d})`})])};oe.__docgenInfo={description:"",methods:[],displayName:"NotePositioner"};const Te=h.createContext({inEditMode:!1});S.isRequired;a.bool,a.elementType.isRequired,a.func.isRequired,a.func.isRequired;const At=function(s){const{note:e}=s,{setEditingNote:t,editingNote:n}=h.useContext(Te),{noteComponent:o}=h.useContext(N);return y(o,{visibility:n===e?"hidden":"inherit",note:e,onClick:()=>t(e)})},Gt=h.forwardRef(function(s,e){const{note:t,offsetY:n,noteHeight:o}=s,{editingNote:i}=h.useContext(Te);return i===t?null:y("g.note",[y(Vt,{note:t}),y(oe,{offsetY:n,noteHeight:o,ref:e},[y(At,{note:t})])])});class He extends h.Component{static initClass(){this.propTypes={editable:a.bool,note:S.isRequired,editHandler:a.func},this.contextType=N}constructor(e){super(e),this.updateHeight=this.updateHeight.bind(this),this.componentDidMount=this.componentDidMount.bind(this),this.componentDidUpdate=this.componentDidUpdate.bind(this),this.element=h.createRef(),this.state={height:null}}render(){const{style:e,note:t,editHandler:n,editable:o}=this.props,{scale:i,nodes:r,columnIndex:l,width:c,paddingLeft:d}=this.context,p=r[t.id];let m=i(t.height);p!=null&&(m=p.currentPos);const f=this.state.height||0;return y(Gt,{offsetY:m,note:t,noteHeight:f,ref:this.element})}updateHeight(e){const t=this.element.current;if(t==null)return;const n=t.offsetHeight;if(n!=null&&!(e!=null&&e.note===this.props.note))return this.setState({height:n}),this.context.registerHeight(this.props.note.id,n)}componentDidMount(){return this.updateHeight.apply(this,arguments)}componentDidUpdate(){return this.updateHeight.apply(this,arguments)}}He.initClass();He.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null},{name:"updateHeight",docblock:null,modifiers:[],params:[{name:"prevProps",optional:!1,type:null}],returns:null}],displayName:"Note"};oe.__docgenInfo={description:"",methods:[],displayName:"NotePositioner"};a.func,S.isRequired;a.arrayOf(S).isRequired,a.number.isRequired,a.number,a.func,a.func,a.func,a.func,a.bool,a.elementType,a.elementType,a.bool,a.object;a.arrayOf(S).isRequired,a.number.isRequired,a.number,a.elementType;const Re=s=>s,jt=h.createContext({photos:null,computePhotoPath:Re}),Yt=a.shape({src:a.string.isRequired,caption:a.string});class Fe extends h.Component{static initClass(){this.propTypes={photos:a.arrayOf(Yt),computePhotoPath:a.func},this.defaultProps={computePhotoPath:Re}}render(){const{children:e,...t}=this.props;return g(jt.Provider,{value:t,children:e})}}Fe.initClass();Fe.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"PhotoLibraryProvider"};const E=class E extends h.Component{render(){return u("g.y.axis")}componentDidUpdate(){const{scale:e}=this.context,{showLabel:t}=this.props;this.yAxis.scale(e);for(let o of this.constructor.__d3axisKeys)this.props[o]!=null&&this.yAxis[o](this.props[o]);const n=pe(Z.findDOMNode(this)).call(this.yAxis);return this.props.showDomain||n.select(".domain").remove(),n.selectAll(".tick text").each(function(o){if(!t(o))return pe(this).attr("visibility","hidden")})}componentDidMount(){this.yAxis=tt(),this.componentDidUpdate()}};E.contextType=C,E.__d3axisKeys=["ticks","tickArguments","tickValues","tickFormat","tickSize","tickSizeInner","tickSizeOuter","tickPadding"],E.defaultProps={ticks:4,showLabel(){return!0},showDomain:!0};let O=E;O.__docgenInfo={description:"",methods:[],displayName:"ColumnAxis",props:{ticks:{defaultValue:{value:"4",computed:!1},required:!1},showDomain:{defaultValue:{value:"true",computed:!1},required:!1}}};const se=h.createContext(null),Xt=s=>{const{resolvePattern:e,children:t}=s;return g(se.Provider,{value:{resolvePattern:e},children:t})},Kt=s=>{h.useContext(se);let{prefix:e,backgroundColor:t,color:n,width:o,height:i,id:r,name:l,...c}=s;const d={width:o,height:i},p=`${e}-${l??r}`,m=h.useRef();return dt(async()=>{const{current:f}=m;if(f!=null)try{const b=await nt(r,t,n);f.crossOrigin="anonymous",f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b)}catch(b){console.error(b)}},[r,m]),g("pattern",{id:p,patternUnits:"userSpaceOnUse",...d,...c},g("image",{ref:m,...d}))},Jt=s=>{const{resolvePattern:e}=h.useContext(se)??{};if(e==null)return null;let{prefix:t,backgroundColor:n,color:o,width:i=100,height:r=100,id:l,name:c,...d}=s;const p={width:i,height:r},m={x:0,y:0,...p},f=e(l);if(f==null)return null;const b=`${t}-${c??l}`,x=`${b}-mask`;return g("pattern",{id:b,patternUnits:"userSpaceOnUse",shapeRendering:"crispEdges",...p,...d},[g("g",{style:{isolation:"isolate"}},[g.if(o!=null&&l!=null)("mask",{id:x},[g("image",{xlinkHref:f,...m})]),g.if(n!=null)("rect",{...m,fill:n}),g.if(o!=null)("rect",{...m,fill:o,mask:`url(#${x})`}),g.if(l!=null&&o==null)("image",{xlinkHref:f,...m})])])},Zt=s=>{let{type:e="vector",invert:t,...n}=s;switch((t??!1)&&(n.color=s.backgroundColor,n.backgroundColor=s.color),e){case"vector":return g(Jt,n);case"raster":return g(Kt,n)}};h.createContext(null);const Qt=ot.Lines,en={"dolomite-limestone":641,lime_mudstone:627,sandstone:607,siltstone:616,"dolomitic siltstone":616,shale:620,limestone:627,dolomite:642,conglomerate:602,"dolomite-mudstone":642,mudstone:620,"sandy-dolomite":645,quartzite:702},tn=function(s){if(s==null)return null;const e=s.fgdc_pattern??en[s.pattern]??s.pattern;return e==null?null:`${e}`},nn=function(s){let{bottom:e,top:t}=s;return t<e&&([t,e]=[e,t]),[e,t]};class L extends h.Component{static initClass(){this.contextType=C,this.propTypes={division:a.object.isRequired,padWidth:a.bool},this.defaultProps={padWidth:!1}}render(){const{scale:e}=this.context;let{division:t,padWidth:n,key:o,width:i,...r}=this.props;const[l,c]=nn(t),d=e(c);let p=0;n&&(p-=5,i+=10);const m=e(l)-d;return o==null&&(o=t.id),u("rect",{x:p,y:d,width:i,height:m,key:o,...r})}}L.initClass();const on=function(s,e){const t=[{...s[0]}];for(let n of Array.from(s)){const o=t.length-1;n[e]==null||n[e]===t[o][e]?t[o].top=n.top:t.push({...n})}return t},sn=function(s){const{divisions:e,width:t}=h.useContext(P),{padWidth:n,parameter:o,fillForInterval:i,minimumHeight:r}=s,l=on(e,o);return l.length===1?null:u("g",{className:o},l.map(c=>u(L,{className:I(o,c.id),division:c,padWidth:n,fill:i(c[o],c),width:t})))};sn.propTypes={padWidth:a.number,parameter:a.string.isRequired,fillForInterval:a.func.isRequired};const de=class de extends H{render(){const{divisions:e,width:t}=this.context,n=`url(#${this.UUID}-covered)`,o=e.filter(i=>i.covered);return u("g.covered-overlay",{},[u("defs",[u(Qt,{id:`${this.UUID}-covered`,size:9,strokeWidth:3,stroke:"rgba(0,0,0,0.5)"})]),u("g.main",o.map(i=>u(L,{division:i,width:t,fill:n})))])}};de.contextType=P;let G=de;const rn=function(s){let{resolveID:e,divisions:t,UUID:n,scalePattern:o}=s;o==null&&(o=()=>1),t==null&&({divisions:t}=h.useContext(C));const i=t.map(r=>e(r)).filter((r,l,c)=>c.indexOf(r)===l);return u("defs",i.map(function(r,l){if(r===-1)return null;let c=100;if(o!=null){const d=o(r);c*=d}return u(Zt,{key:l,prefix:n,id:r,width:c,height:c})}))};class ie extends H{constructor(...e){super(...e),this.constructLithologyDivisions=this.constructLithologyDivisions.bind(this),this.renderEach=this.renderEach.bind(this)}static initClass(){this.contextType=P,this.defaultProps={resolveID:tn,minimumHeight:0}}constructLithologyDivisions(){let e,t;const{divisions:n}=this.context,{resolveID:o,minimumHeight:i}=this.props,r=[];for(e of Array.from(n)){const c=r.length-1;if(t=o(e),c===-1){r.push({...e,patternID:t});continue}const d=t===o(r[c]);t==null||d?r[c].top=e.top:r.push({...e,patternID:t})}if(i>0){const c=[];for(let d=0;d<r.length;d++)if(e=r[d],e.top-e.bottom<i&&r[d+1]!=null){var l;r[d+1].bottom=e.bottom,r[l=d+1].patternID==null&&(r[l].patternID=o(e))}else c.push(e);return c}return r}renderEach(e){const{width:t}=this.context,n=I({definite:e.definite_boundary,covered:e.covered},"lithology");let o=`url(#${this.UUID}-${e.patternID})`;return e.patternID===-1&&(o="transparent"),u(L,{width:t,division:e,className:n,fill:o})}render(){const e=this.constructLithologyDivisions(),{resolveID:t}=this.props;return u("g.lithology",[u(rn,{divisions:e,resolveID:t,UUID:this.UUID}),u("g",e.map(this.renderEach))])}}ie.initClass();const ln=function(s){let{children:e,frame:t,...n}=s;return t==null&&(t=z),u(ee,{className:"lithology-column",frame:t,...n},e)};ie.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null},{name:"constructLithologyDivisions",docblock:null,modifiers:[],params:[],returns:null},{name:"renderEach",docblock:null,modifiers:[],params:[{name:"d",optional:!1,type:null}],returns:null}],displayName:"LithologyBoxes"};G.__docgenInfo={description:"",methods:[],displayName:"CoveredOverlay"};B.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"SimpleFrame"};z.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"GrainsizeFrame"};L.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"ColumnRect"};function Ee(s,e){return s===e?[s]:[s,...Ee(s+1,e)]}class Ue extends H{constructor(...e){super(...e),this.renderSurfaces=this.renderSurfaces.bind(this)}static initClass(){this.contextType=C,this.defaultProps={offsetLeft:-90,lineWidth:50,order:2}}render(){let{offsetLeft:e,lineWidth:t,order:n,orders:o,minOrder:i,maxOrder:r}=this.props;const{scale:l,zoom:c,divisions:d}=this.context;o==null&&i!=null&&r!=null&&(o=Ee(i,r));const[p,m]=l.range();o==null&&n!=null&&(o=[n]),o.reverse();const f=V(),b=function(v,_,k,w=5,q=2){const Ae=T().domain([0,w]).range([v,_]);f.lineTo(v,k);for(let D=0,W=w,ue=0<=W;ue?D<W:D>W;ue?D++:D--){const Ge=Ae(D);let he=k;D%2===1&&(he+=q),f.lineTo(Ge,he)}return f.lineTo(_,k)},x=p-m;return f.moveTo(-t,0),b(-t,t,x,16,3),b(t,-t,0,16,3),f.closePath(),u("g.triangle-bars",{},[u("defs",[h.createElement("clipPath",{id:this.UUID},[u("path",{d:f.toString(),key:this.UUID+"-path"})])]),o.map(this.renderSurfaces)])}renderSurfaces(e,t){let n,o;const{scale:i,zoom:r,divisions:l}=this.context,{offsetLeft:c,lineWidth:d}=this.props;if(!l.length)return null;const p=d/2,m=c+d*2+5,f=[];for(o=0;o<l.length;o++){n=l[o];const{surface_type:_,surface_order:k}=n;if(_==null||k==null||!(k<=e))continue;const w=i(n.bottom);if(_==="mfs"&&f.push(["mfs",w]),_==="sb"){if(f.length===0){f.push(["sb",w]);continue}const q=f.length-1;f[q][0]==="sb"?f[q][1]=w:f.push(["sb",w])}}if(!f.length)return null;const b=V();let x=null,v=null;for(o=0;o<f.length;o++){const _=f[o];_[0]==="mfs"&&x!=null&&(b.moveTo(0,x[1]),v!=null?(b.lineTo(p,v[1]),b.lineTo(0,_[1]),b.lineTo(-p,v[1]),b.closePath()):(b.lineTo(p,_[1]),b.lineTo(-p,_[1]),b.closePath()),v=null,x=null),_[0]==="mfs"?x=_:_[0]==="sb"&&(v=_)}return u(`g.level-${e}`,{clipPath:`url(#${this.UUID})`,transform:`translate(${-d*(2+t)+m})`,key:this.UUID+"-"+e},[u("path",{d:b.toString(),key:this.UUID+"-"+e})])}}Ue.initClass();Ue.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null},{name:"renderSurfaces",docblock:null,modifiers:[],params:[{name:"order",optional:!1,type:null},{name:"index",optional:!1,type:null}],returns:null}],displayName:"TriangleBars"};const j={"Hummocky cross-stratified":"hcs.svg","Trough cross-stratified":"tcs.svg","Dessication cracks":"dessication-cracks.svg",Ooids:"ooids.svg","Domal stromatolites":"domal-stromatolites.svg","Digitate stromatolites":"digitate-stromatolites.svg"},an=function(s){const{symbol:e,width:t,height:n,UUID:o}=s,{resolveSymbol:i}=h.useContext(we),r=`${o}-${e}`,l={width:t},c=i(j[e]);return u("symbol",{id:r,key:r,...l},[u("image",{href:c,x:0,y:0,...l})])},cn=function(s){const{patterns:e,...t}=s,n=[];return u("defs",e.map(function(o){const{symbol:i}=o;return n.includes(i)?null:(n.push(i),u(an,{symbol:i,...t}))}))};class Le extends H{constructor(...e){super(...e),this.renderSymbol=this.renderSymbol.bind(this)}static initClass(){this.contextType=C,this.defaultProps={width:30,left:0},this.propTypes={width:a.number,left:a.number,symbols:a.arrayOf(a.object).isRequired}}render(){const{scale:e,pixelHeight:t,zoom:n}=this.context,{left:o,width:i}=this.props;let{symbols:r}=this.props;const l=r.filter((d,p,m)=>m.indexOf(d)===p);let c=null;return o!=null&&(c=`translate(${o})`),r=r.filter(d=>d.symbol_min_zoom<n).map(this.renderSymbol),u("g.symbol-column",{transform:c},[u(cn,{width:i,patterns:l,UUID:this.UUID}),u("rect.symbol-column-area",{width:i,height:t}),u("g.symbols",r)])}renderSymbol(e){const{scale:t,pixelHeight:n}=this.context,{symbol:o,id:i,height:r}=e,l=I({symbol:o},"symbol"),{width:c}=this.props,d=t(r)-c/2;if(d<0||d>n)return null;const p=`#${this.UUID}-${o}`;return u("use",{className:l,y:d,x:0,width:c,xlinkHref:p,key:i})}}Le.initClass();class qe extends h.Component{static initClass(){this.contextType=we}render(){const{resolveSymbol:e}=this.context,t=[];for(let n in j){const o=j[n],i=u("div",{key:n},[u("img",{src:e(o)}),u("span.label",n)]);t.push(i)}return u("div.symbol-legend",t)}}qe.initClass();Le.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null},{name:"renderSymbol",docblock:null,modifiers:[],params:[{name:"d",optional:!1,type:null}],returns:null}],displayName:"SymbolColumn"};qe.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"SymbolLegend"};J(".1f");const Y=J(".2f"),dn=function(s){const{interval:e,children:t}=s;return y("div.interval-editor-title",[y("h3",`${Y(e.bottom)}–${Y(e.top)} m`),y("div.id",[y("code",e.id)]),t])},re=s=>{const{division:e,background:t,className:n,onClick:o}=s,{widthForDivision:i,scaleClamped:r}=h.useContext(P);if(r==null)return null;const l=r(e.top),d=r(e.bottom)-l,p=i(e);return y("div",{style:{marginTop:l,height:d,width:p,pointerEvents:"none",position:"absolute"}},[y("div",{onClick:o,className:n,style:{cursor:o!=null?"pointer":null,width:"100%",height:"100%",background:t}}),s.children])};re.propTypes={division:a.object};const un=function({division:s,color:e,...t}){if(s==null)return null;e==null&&(e="red");const n=ve(e).alpha(.5).css();return y(re,{className:"editing-box",division:s,background:n,...t})},U=class U extends h.Component{constructor(e){super(e),this.onHoverInterval=this.onHoverInterval.bind(this),this.removeHoverBox=this.removeHoverBox.bind(this),this.heightForEvent=this.heightForEvent.bind(this),this.onEditInterval=this.onEditInterval.bind(this),this.onClick=this.onClick.bind(this),this.renderCursorLine=this.renderCursorLine.bind(this),this.renderHoveredBox=this.renderHoveredBox.bind(this),this.closePopover=this.closePopover.bind(this),this.state={height:null,hoveredDivision:null,popoverIsOpen:!1},this.timeout=null}onHoverInterval(e){if(e.stopPropagation(),Z.findDOMNode(this)!==e.target)return;const t=this.heightForEvent(e);if(this.setState({height:t}),!this.props.allowEditing)return;const{divisions:n}=this.context;let o=null;for(let i of Array.from(n))if(i.bottom<=t&&t<i.top){o=i;break}if(o!==this.state.hoveredDivision&&(this.setState({hoveredDivision:o}),this.timeout!=null))return clearTimeout(this.timeout),this.timeout=null}removeHoverBox(){return this.setState({hoveredDivision:null,popoverIsOpen:!1}),this.timeout=null}heightForEvent(e){const{scale:t}=this.context,{offsetY:n}=e.nativeEvent;return t.invert(n)}onEditInterval(e){if(this.state.popoverIsOpen)return;const{history:t,showInfoBox:n}=this.props,{hoveredDivision:o}=this.state,i=this.heightForEvent(e);if(e.stopPropagation(),e.shiftKey&&n){this.setState({popoverIsOpen:!0});return}return this.props.onClick({event:e,height:i,division:o})}onClick(e){if(this.props.allowEditing)return this.onEditInterval(e);const t=this.heightForEvent(e);return this.props.onClick({height:t})}renderCursorLine(){let{height:e,hoveredDivision:t}=this.state;const{scaleClamped:n}=this.context,{selectedHeight:o}=this.props;if(e==null&&(e=o),e==null)return;const i={top:n(e),height:0,border:"0.5px solid black",width:this.context.widthForDivision(t),position:"absolute",pointerEvents:"none"};return y("div.cursor",{style:i},[y("div.cursor-position",{style:{pointerEvents:"none",fontWeight:"bold",fontSize:"12px",left:"2px",top:"-14px",position:"absolute",color:"black"}},[Y(e)])])}renderHoveredBox(){if(this.state.hoveredDivision==null)return null;const{popoverIsOpen:e,hoveredDivision:t}=this.state,n=this.context.widthForDivision(t),{color:o}=this.props,i=ve(o).alpha(.3).css();return y(re,{division:t,className:"hovered-box",background:i},[y.if(this.props.renderEditorPopup)(ye,{isOpen:e&&t!=null,style:{display:"block",width:n},position:st.LEFT},[y("div",{style:{width:n,height:30,transform:"translate(0,-30)"}}),y("div.editor-popover-contents",{style:{width:this.props.popoverWidth,padding:"10px"}},[y(dn,{interval:t},[y(ut,{icon:"cross",minimal:!0,intent:ht.WARNING,onClick:this.closePopover.bind(this)})]),this.props.renderEditorPopup(t)])])])}closePopover(){return this.setState({popoverIsOpen:!1})}render(){let{divisions:e,pixelHeight:t,width:n}=this.context;const{popoverIsOpen:o,hoveredDivision:i}=this.state,{left:r,top:l,color:c}=this.props;return n==null&&({width:n}=this.props),y(_e,{className:"edit-overlay",width:n,height:t,style:{left:r,top:l,position:"absolute",zIndex:18,pointerEvents:"all",cursor:"pointer"},onClick:this.onEditInterval,onMouseEnter:this.onHoverInterval,onMouseMove:this.onHoverInterval,onMouseLeave:()=>{if(!o)return this.setState({height:null}),this.timeout=setTimeout(this.removeHoverBox,1e3)}},[this.renderHoveredBox(),y(un,{division:this.props.editingInterval,color:c}),this.renderCursorLine()])}};U.contextType=P,U.propTypes={left:a.number,top:a.number,showInfoBox:a.bool,onClick:a.func,allowEditing:a.bool,renderEditorPopup:a.func,scaleToGrainsize:a.bool,editingInterval:a.object,color:a.string,width:a.number,popoverWidth:a.number,selectedHeight:a.number},U.defaultProps={onHoverInterval(){},onClick(){},left:0,top:0,showInfoBox:!1,allowEditing:!0,renderEditorPopup(){return null},color:"red",popoverWidth:340};let X=U;X.__docgenInfo={description:"",methods:[{name:"onHoverInterval",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"removeHoverBox",docblock:null,modifiers:[],params:[],returns:null},{name:"heightForEvent",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"onEditInterval",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"onClick",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"renderCursorLine",docblock:null,modifiers:[],params:[],returns:null},{name:"renderHoveredBox",docblock:null,modifiers:[],params:[],returns:null},{name:"closePopover",docblock:null,modifiers:[],params:[],returns:null}],displayName:"DivisionEditOverlay",props:{left:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},top:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},showInfoBox:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},allowEditing:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},color:{defaultValue:{value:'"red"',computed:!1},description:"",type:{name:"string"},required:!1},popoverWidth:{defaultValue:{value:"340",computed:!1},description:"",type:{name:"number"},required:!1},onClick:{description:"",type:{name:"func"},required:!1},renderEditorPopup:{description:"",type:{name:"func"},required:!1},scaleToGrainsize:{description:"",type:{name:"bool"},required:!1},editingInterval:{description:"",type:{name:"object"},required:!1},width:{description:"",type:{name:"number"},required:!1},selectedHeight:{description:"",type:{name:"number"},required:!1}}};class le extends h.Component{constructor(...e){super(...e),this.onUpdate=this.onUpdate.bind(this)}static initClass(){this.defaultProps={states:[{label:"State 1",value:"state1"},{label:"State 2",value:"state2"}],vertical:!0,isNullable:!1}}render(){const{states:e,activeState:t,vertical:n}=this.props;let o=I("bp4-button-group","bp4-fill",{"bp4-vertical":n,"bp4-align-left":n});return g("div.picker-control",[g("div",{className:o},e.map(i=>(o=I("bp4-button",{"bp4-active":this.props.activeState===i.value}),g("button",{type:"button",className:o,onClick:this.onUpdate(i.value)},i.label))))])}onUpdate(e){return()=>{if(e===this.props.activeState){if(!this.props.isNullable)return;e=null}if(this.props.onUpdate!=null)return this.props.onUpdate(e)}}}le.initClass();le.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null},{name:"onUpdate",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:null}],returns:null}],displayName:"PickerControl"};const Oe=a.shape({definite_boundary:a.bool});J(".1f");const hn=s=>u(le,{vertical:!1,isNullable:!0,...s});class $e extends h.Component{static initClass(){this.propTypes={interval:Oe}}render(){const{interval:e,onUpdate:t}=this.props;return u(hn,{states:[{label:"Abrupt",value:!0},{label:"Diffuse",value:!1}],activeState:e.definite_boundary,onUpdate:t})}}$e.initClass();$e.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"BoundaryStyleControl"};const pn="_hidden_1hepe_84",mn="_expanded_1hepe_88",ae={"correlated-surface-row":"_correlated-surface-row_1hepe_1","facies-picker-row":"_facies-picker-row_1hepe_11","facies-picker-name":"_facies-picker-name_1hepe_22","facies-color-swatch":"_facies-color-swatch_1hepe_30","lithology-swatch":"_lithology-swatch_1hepe_31","picker-label":"_picker-label_1hepe_41","editor-dialog-title":"_editor-dialog-title_1hepe_45","title-center":"_title-center_1hepe_62","height-range":"_height-range_1hepe_66","lithology-symbol-picker":"_lithology-symbol-picker_1hepe_78",hidden:pn,"lithology-symbol-picker-inner":"_lithology-symbol-picker-inner_1hepe_84",expanded:mn,"expand-button":"_expand-button_1hepe_88","labeled-control":"_labeled-control_1hepe_107","label-text":"_label-text_1hepe_116"},fn=K(ae),gn=s=>({...s,zIndex:999}),bn=s=>fn(it,{styles:{menu:gn},...s});a.bool,a.node.isRequired,Oe.isRequired,a.string;class Me extends h.Component{static initClass(){this.contextType=M,this.propTypes={facies:a.object.isRequired}}render(){const{setFaciesColor:e}=this.context,{facies:t}=this.props;return u("div",[u(pt,{color:t.color||"black",onChangeComplete(n){return e(t.id,n.hex)},styles:{width:500,height:570}})])}}Me.initClass();const Be=({facies:s,...e})=>u("div.color-swatch",{style:{backgroundColor:s.color||"black",width:"2em",height:"2em"},...e});class ce extends h.Component{constructor(...e){super(...e),this.renderBasicSwatch=this.renderBasicSwatch.bind(this),this.render=this.render.bind(this)}static initClass(){this.defaultProps={isEditable:!0,facies:null}}renderBasicSwatch(){const{facies:e}=this.props;return u(Be,{facies:e})}render(){const{facies:e,isEditable:t}=this.props;return this.props.isEditable?u(ye,{tetherOptions:{constraints:[{attachment:"together",to:"scrollParent"}]}},[this.renderBasicSwatch(),u(Me,{facies:e})]):this.renderBasicSwatch}}ce.initClass();ce.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null},{name:"renderBasicSwatch",docblock:null,modifiers:[],params:[],returns:null}],displayName:"FaciesSwatch"};const F=K(ae),yn=({facies:s})=>F("span.facies-picker-row",[F(Be,{facies:s,className:"facies-color-swatch"}),F("span.facies-picker-name",s.name)]);class ze extends h.Component{static initClass(){this.contextType=M}render(){const{facies:e}=this.context,{interval:t,onChange:n}=this.props,o=e.map(r=>({value:r.id,label:F(yn,{facies:r})}));let i=o.find(r=>r.value===t.facies);return i==null&&(i=null),F(bn,{id:"facies-select",options:o,value:i,selected:t.facies,isClearable:!0,onChange(r){console.log("Changing",r);const l=r!=null?r.value:null;return n(l)}})}}ze.initClass();ze.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"FaciesPicker"};const xn=({facies:s})=>u("div.header",[u("p.name",{style:{marginRight:20,textAlign:"left"}},s.name),u(ce,{facies:s})]);class We extends h.Component{constructor(...e){super(...e),this.renderEach=this.renderEach.bind(this)}static initClass(){this.contextType=M,this.defaultProps={selected:null,isEditable:!1}}renderEach(e){let t=null;const n={};this.props.onClick!=null&&(t=()=>this.props.onClick(e),n.cursor="pointer");const{selected:o}=this.props;o===e.id&&(n.backgroundColor=e.color,n.color="white");const i=I({selected:o===e.id});return u("div.facies.bp3-card.bp3-elevation-0",{key:e.id,onClick:t,style:n,className:i},u(xn,{facies:e}))}render(){const{facies:e}=this.context;return u("div.facies-description-small",[u("h5","Facies"),u("div",e.map(this.renderEach))])}}We.initClass();We.__docgenInfo={description:"",methods:[{name:"initClass",docblock:null,modifiers:["static"],params:[],returns:null},{name:"renderEach",docblock:null,modifiers:[],params:[{name:"d",optional:!1,type:null}],returns:null}],displayName:"FaciesDescriptionSmall"};g.styled(ae);function _n(s){return`../../../deps/geologic-patterns/assets/svg/${s}.svg`}const Ve=Object.assign({});console.log("Patterns",Ve);const vn=s=>{var t;const e=_n(s);return(t=Ve[e])==null?void 0:t.default};function Cn({children:s}){return g(Xt,{resolvePattern:vn},s)}function wn(s,e){const t=s.filter(n=>n.unit_id!=null);return s.map((n,o)=>{const{height:i,...r}=n,l=i,c=s[o+1],d=c!=null?c.height:e[1],p=t[o+1],m=p!=null?p.height:e[1];return{top:d,bottom:l,t_age:l,b_age:l+m,...r}})}function kn(s){const{data:e=[],range:t,children:n,params:o,showTimescale:i=!0,timescaleProps:r={},className:l,width:c=250,showAxis:d=!0}=s;let{pixelScale:p=1.3}=s,m=wn(e,t);return g("div.measured-section.column",{className:l},[g(Ft,{divisions:m,range:t,pixelsPerMeter:p},[g.if(d)(Ne,{innerWidth:0,padding:30,paddingLeft:40,paddingBottom:30,paddingRight:1},g(O)),g.if(i)(rt,{orientation:lt.VERTICAL,increaseDirection:at.UP_RIGHT,length:(t[1]-t[0])*p,absoluteAgeScale:!0,showAgeAxis:!1,ageRange:t,...r}),n])])}const $n=s=>{const{children:e,className:t,width:n=250,...o}=s;return s.grainsizeScaleStart??.5*n,g(Pn,{className:t,children:e,...o},[g(Ne,{innerWidth:200,padding:30,paddingLeft:0,paddingBottom:30},[g(Ut,{width:80,grainsizeScaleStart:40},[g(ln,[e,g(ie,{resolveID:i=>i.pattern})])])])])},Pn=je(Cn,kn);export{$n as M,sn as P,tn as d};
